/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={526:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,i=s(e),a=i[0],c=i[1],u=new o(function(e,t,r){return 3*(t+r)/4-r}(0,a,c)),l=0,h=c>0?a-4:a;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===c&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[l++]=255&t),1===c&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=16383,s=0,u=n-o;s<u;s+=a)i.push(c(e,s,s+a>u?u:s+a));return 1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=i[a],n[i.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var o,i,a=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},287:(e,t,r)=>{"use strict";const n=r(526),o=r(251),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=c,t.IS=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|p(e,t);let n=s(r);const o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(W(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(W(e,ArrayBuffer)||e&&W(e.buffer,ArrayBuffer))return f(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(W(e,SharedArrayBuffer)||e&&W(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);const o=function(e){if(c.isBuffer(e)){const t=0|m(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||q(e.length)?s(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return l(e),s(e<0?0:0|m(e))}function d(e){const t=e.length<0?0:0|m(e.length),r=s(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,c.prototype),n}function m(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function p(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||W(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(o)return n?-1:$(e).length;t=(""+t).toLowerCase(),o=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return L(this,t,r);case"ascii":return x(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return C(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),q(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:P(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):P(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function P(e,t,r,n,o){let i,a=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){let n=-1;for(i=r;i<s;i++)if(u(e,i)===u(t,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===c)return n*a}else-1!==n&&(i-=i-n),n=-1}else for(r+c>s&&(r=s-c),i=r;i>=0;i--){let r=!0;for(let n=0;n<c;n++)if(u(e,i+n)!==u(t,n)){r=!1;break}if(r)return i}return-1}function E(e,t,r,n){r=Number(r)||0;const o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;const i=t.length;let a;for(n>i/2&&(n=i/2),a=0;a<n;++a){const n=parseInt(t.substr(2*a,2),16);if(q(n))return a;e[r+a]=n}return a}function I(e,t,r,n){return J($(t,e.length-r),e,r,n)}function w(e,t,r,n){return J(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return J(X(t),e,r,n)}function b(e,t,r,n){return J(function(e,t){let r,n,o;const i=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function C(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function L(e,t,r){r=Math.min(e.length,r);const n=[];let o=t;for(;o<r;){const t=e[o];let i=null,a=t>239?4:t>223?3:t>191?2:1;if(o+a<=r){let r,n,s,c;switch(a){case 1:t<128&&(i=t);break;case 2:r=e[o+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(i=c));break;case 3:r=e[o+1],n=e[o+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:r=e[o+1],n=e[o+2],s=e[o+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=a}return function(e){const t=e.length;if(t<=B)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=B));return r}(n)}c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},c.allocUnsafe=function(e){return h(e)},c.allocUnsafeSlow=function(e){return h(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(W(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),W(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=c.allocUnsafe(t);let o=0;for(r=0;r<e.length;++r){let t=e[r];if(W(t,Uint8Array))o+t.length>n.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(n,o)):Uint8Array.prototype.set.call(n,t,o);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,o)}o+=t.length}return n},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?L(this,0,e):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const r=t.IS;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,o){if(W(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;let i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);const s=Math.min(i,a),u=this.slice(n,o),l=e.slice(t,r);for(let e=0;e<s;++e)if(u[e]!==l[e]){i=u[e],a=l[e];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return E(this,e,t,r);case"utf8":case"utf-8":return I(this,e,t,r);case"ascii":case"latin1":case"binary":return w(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const B=4096;function x(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function R(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function T(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let n=t;n<r;++n)o+=Z[e[n]];return o}function A(e,t,r){const n=e.slice(t,r);let o="";for(let e=0;e<n.length-1;e+=2)o+=String.fromCharCode(n[e]+256*n[e+1]);return o}function k(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,r,n,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function O(e,t,r,n,o){H(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function G(e,t,r,n,o){H(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function M(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,n,i){return t=+t,r>>>=0,i||M(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,i){return t=+t,r>>>=0,i||M(e,0,r,8),o.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=K((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))})),c.prototype.readBigUInt64BE=K((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)})),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=t,o=1,i=this[e+--n];for(;n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||k(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||k(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=K((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=K((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||k(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||k(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||k(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||k(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||D(this,e,t,r,Math.pow(2,8*r)-1,0);let o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||D(this,e,t,r,Math.pow(2,8*r)-1,0);let o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=K((function(e,t=0){return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=K((function(e,t=0){return G(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);D(this,e,t,r,n-1,-n)}let o=0,i=1,a=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/i|0)-a&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);D(this,e,t,r,n-1,-n)}let o=r-1,i=1,a=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/i|0)-a&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=K((function(e,t=0){return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=K((function(e,t=0){return G(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{const i=c.isBuffer(e)?e:c.from(e,n),a=i.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=i[o%a]}return this};const _={};function j(e,t,r){_[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function N(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function H(e,t,r,n,o,i){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let o;throw o=i>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new _.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,r){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||V(t,e.length-(r+1))}(n,o,i)}function z(e,t){if("number"!=typeof e)throw new _.ERR_INVALID_ARG_TYPE(t,"number",e)}function V(e,t,r){if(Math.floor(e)!==e)throw z(e,r),new _.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new _.ERR_BUFFER_OUT_OF_BOUNDS;throw new _.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}j("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),j("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),j("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=N(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=N(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n}),RangeError);const Y=/[^+/0-9A-Za-z-_]/g;function $(e,t){let r;t=t||1/0;const n=e.length;let o=null;const i=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function X(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function J(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function W(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function q(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function K(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},251:(e,t)=>{t.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,c=(1<<s)-1,u=c>>1,l=-7,h=r?o-1:0,d=r?-1:1,f=e[t+h];for(h+=d,i=f&(1<<-l)-1,f>>=-l,l+=s;l>0;i=256*i+e[t+h],h+=d,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;l>0;a=256*a+e[t+h],h+=d,l-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),i-=u}return(f?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var a,s,c,u=8*i-o-1,l=(1<<u)-1,h=l>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,m=n?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(a++,c/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(t*c-1)*Math.pow(2,o),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,o),a=0));o>=8;e[r+f]=255&s,f+=m,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[r+f]=255&a,f+=m,a/=256,u-=8);e[r+f-m]|=128*p}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}(()=>{"use strict";var e={};function t(e){return l(">"+d("B",e.length),e)}function n(e){return l(">"+d("H",e.length),e)}function o(e){return l(">"+d("L",e.length),e)}function i(e,r,i){var a,s,c,u,h="",f="";if("Byte"==r)(a=e.length)<=4?f=t(e)+d("\0",4-a):(f=l(">L",[i]),h=t(e));else if("Short"==r)(a=e.length)<=2?f=n(e)+d("\0\0",2-a):(f=l(">L",[i]),h=n(e));else if("Long"==r)(a=e.length)<=1?f=o(e):(f=l(">L",[i]),h=o(e));else if("Ascii"==r)(a=(s=e+"\0").length)>4?(f=l(">L",[i]),h=s):f=s+d("\0",4-a);else if("Rational"==r){if("number"==typeof e[0])a=1,c=e[0],u=e[1],s=l(">L",[c])+l(">L",[u]);else{a=e.length,s="";for(var m=0;m<a;m++)c=e[m][0],u=e[m][1],s+=l(">L",[c])+l(">L",[u])}f=l(">L",[i]),h=s}else if("SRational"==r){if("number"==typeof e[0])a=1,c=e[0],u=e[1],s=l(">l",[c])+l(">l",[u]);else for(a=e.length,s="",m=0;m<a;m++)c=e[m][0],u=e[m][1],s+=l(">l",[c])+l(">l",[u]);f=l(">L",[i]),h=s}else"Undefined"==r&&((a=e.length)>4?(f=l(">L",[i]),h=e):f=e+d("\0",4-a));return[l(">L",[a]),f,h]}function a(e,t,r){var n,o=Object.keys(e).length,a=l(">H",[o]);n=["0th","1st"].indexOf(t)>-1?2+12*o+4:2+12*o;var s="",c="";for(var u in e)if("string"==typeof u&&(u=parseInt(u)),!("0th"==t&&[34665,34853].indexOf(u)>-1||"Exif"==t&&40965==u||"1st"==t&&[513,514].indexOf(u)>-1)){var h=e[u],d=l(">H",[u]),f=p[t][u].type,g=l(">H",[m[f]]);"number"==typeof h&&(h=[h]);var y=i(h,f,8+n+r+c.length);s+=d+g+y[0]+y[1],c+=y[2]}return[a+s,c]}function s(e){var t;if("ÿØ"==e.slice(0,2))t=function(e){for(var t,r=0;r<e.length;r++)if("ÿá"==(t=e[r]).slice(0,2)&&"Exif\0\0"==t.slice(4,10))return t;return null}(f(e)),this.tiftag=t?t.slice(10):null;else if(["II","MM"].indexOf(e.slice(0,2))>-1)this.tiftag=e;else{if("Exif"!=e.slice(0,4))throw"Given file is neither JPEG nor TIFF.";this.tiftag=e.slice(6)}}if(e.version="1.0.4",e.remove=function(e){var t=!1;if("ÿØ"==e.slice(0,2));else{if("data:image/jpeg;base64,"!=e.slice(0,23)&&"data:image/jpg;base64,"!=e.slice(0,22))throw"Given data is not jpeg.";e=u(e.split(",")[1]),t=!0}var r=f(e).filter((function(e){return!("ÿá"==e.slice(0,2)&&"Exif\0\0"==e.slice(4,10))})).join("");return t&&(r="data:image/jpeg;base64,"+c(r)),r},e.insert=function(e,t){var r=!1;if("Exif\0\0"!=e.slice(0,6))throw"Given data is not exif.";if("ÿØ"==t.slice(0,2));else{if("data:image/jpeg;base64,"!=t.slice(0,23)&&"data:image/jpg;base64,"!=t.slice(0,22))throw"Given data is not jpeg.";t=u(t.split(",")[1]),r=!0}var n="ÿá"+l(">H",[e.length+2])+e,o=function(e,t){return"ÿà"==e[1].slice(0,2)&&"ÿá"==e[2].slice(0,2)&&"Exif\0\0"==e[2].slice(4,10)?t?(e[2]=t,e=["ÿØ"].concat(e.slice(2))):e=null==t?e.slice(0,2).concat(e.slice(3)):e.slice(0).concat(e.slice(2)):"ÿà"==e[1].slice(0,2)?t&&(e[1]=t):"ÿá"==e[1].slice(0,2)&&"Exif\0\0"==e[1].slice(4,10)?t?e[1]=t:null==t&&(e=e.slice(0).concat(e.slice(2))):t&&(e=[e[0],t].concat(e.slice(1))),e.join("")}(f(t),n);return r&&(o="data:image/jpeg;base64,"+c(o)),o},e.load=function(e){var t;if("string"!=typeof e)throw"'load' gots invalid type argument.";if("ÿØ"==e.slice(0,2))t=e;else if("data:image/jpeg;base64,"==e.slice(0,23)||"data:image/jpg;base64,"==e.slice(0,22))t=u(e.split(",")[1]);else{if("Exif"!=e.slice(0,4))throw"'load' gots invalid file data.";t=e.slice(6)}var r={"0th":{},Exif:{},GPS:{},Interop:{},"1st":{},thumbnail:null},n=new s(t);if(null===n.tiftag)return r;"II"==n.tiftag.slice(0,2)?n.endian_mark="<":n.endian_mark=">";var o=h(n.endian_mark+"L",n.tiftag.slice(4,8))[0];r["0th"]=n.get_ifd(o,"0th");var i=r["0th"].first_ifd_pointer;if(delete r["0th"].first_ifd_pointer,34665 in r["0th"]&&(o=r["0th"][34665],r.Exif=n.get_ifd(o,"Exif")),34853 in r["0th"]&&(o=r["0th"][34853],r.GPS=n.get_ifd(o,"GPS")),40965 in r.Exif&&(o=r.Exif[40965],r.Interop=n.get_ifd(o,"Interop")),"\0\0\0\0"!=i&&(o=h(n.endian_mark+"L",i)[0],r["1st"]=n.get_ifd(o,"1st"),513 in r["1st"]&&514 in r["1st"])){var a=r["1st"][513]+r["1st"][514],c=n.tiftag.slice(r["1st"][513],a);r.thumbnail=c}return r},e.dump=function(t){var r,n,o,i,s,c,u=(r=t,JSON.parse(JSON.stringify(r))),h=!1,d=!1,p=!1,g=!1;n="0th"in u?u["0th"]:{},"Exif"in u&&Object.keys(u.Exif).length||"Interop"in u&&Object.keys(u.Interop).length?(n[34665]=1,h=!0,o=u.Exif,"Interop"in u&&Object.keys(u.Interop).length?(o[40965]=1,p=!0,i=u.Interop):Object.keys(o).indexOf(e.ExifIFD.InteroperabilityTag.toString())>-1&&delete o[40965]):Object.keys(n).indexOf(e.ImageIFD.ExifTag.toString())>-1&&delete n[34665],"GPS"in u&&Object.keys(u.GPS).length?(n[e.ImageIFD.GPSTag]=1,d=!0,s=u.GPS):Object.keys(n).indexOf(e.ImageIFD.GPSTag.toString())>-1&&delete n[e.ImageIFD.GPSTag],"1st"in u&&"thumbnail"in u&&null!=u.thumbnail&&(g=!0,u["1st"][513]=1,u["1st"][514]=1,c=u["1st"]);var y,v,P,E=a(n,"0th",0),I=E[0].length+12*h+12*d+4+E[1].length,w="",S=0,b="",C=0,L="",B=0,x="";if(h&&(S=(y=a(o,"Exif",I))[0].length+12*p+y[1].length),d&&(C=(b=a(s,"GPS",I+S).join("")).length),p&&(B=(L=a(i,"Interop",I+S+C).join("")).length),g&&(v=a(c,"1st",I+S+C+B),(P=function(e){for(var t=f(e);"ÿà"<=t[1].slice(0,2)&&t[1].slice(0,2)<="ÿï";)t=[t[0]].concat(t.slice(2));return t.join("")}(u.thumbnail)).length>64e3))throw"Given thumbnail is too large. max 64kB";var R="",T="",A="",k="\0\0\0\0";if(h){var D=l(">L",[O=8+I]);R=l(">H",[34665])+l(">H",[m.Long])+l(">L",[1])+D}if(d&&(D=l(">L",[O=8+I+S]),T=l(">H",[34853])+l(">H",[m.Long])+l(">L",[1])+D),p&&(D=l(">L",[O=8+I+S+C]),A=l(">H",[40965])+l(">H",[m.Long])+l(">L",[1])+D),g){var O;k=l(">L",[O=8+I+S+C+B]);var G="\0\0\0\0"+l(">L",[O+v[0].length+24+4+v[1].length]),M="\0\0\0\0"+l(">L",[P.length]);x=v[0]+G+M+"\0\0\0\0"+v[1]+P}var F=E[0]+R+T+k+E[1];return h&&(w=y[0]+A+y[1]),"Exif\0\0MM\0*\0\0\0\b"+F+w+b+L+x},s.prototype={get_ifd:function(e,t){var r,n={},o=h(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],i=e+2;r=["0th","1st"].indexOf(t)>-1?"Image":t;for(var a=0;a<o;a++){e=i+12*a;var s=h(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],c=[h(this.endian_mark+"H",this.tiftag.slice(e+2,e+4))[0],h(this.endian_mark+"L",this.tiftag.slice(e+4,e+8))[0],this.tiftag.slice(e+8,e+12)];s in p[r]&&(n[s]=this.convert_value(c))}return"0th"==t&&(e=i+12*o,n.first_ifd_pointer=this.tiftag.slice(e,e+4)),n},convert_value:function(e){var t,r=null,n=e[0],o=e[1],i=e[2];if(1==n)o>4?(t=h(this.endian_mark+"L",i)[0],r=h(this.endian_mark+d("B",o),this.tiftag.slice(t,t+o))):r=h(this.endian_mark+d("B",o),i.slice(0,o));else if(2==n)o>4?(t=h(this.endian_mark+"L",i)[0],r=this.tiftag.slice(t,t+o-1)):r=i.slice(0,o-1);else if(3==n)o>2?(t=h(this.endian_mark+"L",i)[0],r=h(this.endian_mark+d("H",o),this.tiftag.slice(t,t+2*o))):r=h(this.endian_mark+d("H",o),i.slice(0,2*o));else if(4==n)o>1?(t=h(this.endian_mark+"L",i)[0],r=h(this.endian_mark+d("L",o),this.tiftag.slice(t,t+4*o))):r=h(this.endian_mark+d("L",o),i);else if(5==n)if(t=h(this.endian_mark+"L",i)[0],o>1){r=[];for(var a=0;a<o;a++)r.push([h(this.endian_mark+"L",this.tiftag.slice(t+8*a,t+4+8*a))[0],h(this.endian_mark+"L",this.tiftag.slice(t+4+8*a,t+8+8*a))[0]])}else r=[h(this.endian_mark+"L",this.tiftag.slice(t,t+4))[0],h(this.endian_mark+"L",this.tiftag.slice(t+4,t+8))[0]];else if(7==n)o>4?(t=h(this.endian_mark+"L",i)[0],r=this.tiftag.slice(t,t+o)):r=i.slice(0,o);else{if(10!=n)throw"Exif might be wrong. Got incorrect value type to decode. type:"+n;if(t=h(this.endian_mark+"L",i)[0],o>1)for(r=[],a=0;a<o;a++)r.push([h(this.endian_mark+"l",this.tiftag.slice(t+8*a,t+4+8*a))[0],h(this.endian_mark+"l",this.tiftag.slice(t+4+8*a,t+8+8*a))[0]]);else r=[h(this.endian_mark+"l",this.tiftag.slice(t,t+4))[0],h(this.endian_mark+"l",this.tiftag.slice(t+4,t+8))[0]]}return r instanceof Array&&1==r.length?r[0]:r}},"undefined"!=typeof window&&"function"==typeof window.btoa)var c=window.btoa;if(void 0===c&&(c=function(e){for(var t,r,n,o,i,a,s,c="",u=0,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";u<e.length;)o=(t=e.charCodeAt(u++))>>2,i=(3&t)<<4|(r=e.charCodeAt(u++))>>4,a=(15&r)<<2|(n=e.charCodeAt(u++))>>6,s=63&n,isNaN(r)?a=s=64:isNaN(n)&&(s=64),c=c+l.charAt(o)+l.charAt(i)+l.charAt(a)+l.charAt(s);return c}),"undefined"!=typeof window&&"function"==typeof window.atob)var u=window.atob;function l(e,t){if(!(t instanceof Array))throw"'pack' error. Got invalid type argument.";if(e.length-1!=t.length)throw"'pack' error. "+(e.length-1)+" marks, "+t.length+" elements.";var r;if("<"==e[0])r=!0;else{if(">"!=e[0])throw"";r=!1}for(var n="",o=1,i=null,a=null,s=null;a=e[o];){if("b"==a.toLowerCase()){if(i=t[o-1],"b"==a&&i<0&&(i+=256),i>255||i<0)throw"'pack' error.";s=String.fromCharCode(i)}else if("H"==a){if((i=t[o-1])>65535||i<0)throw"'pack' error.";s=String.fromCharCode(Math.floor(i%65536/256))+String.fromCharCode(i%256),r&&(s=s.split("").reverse().join(""))}else{if("l"!=a.toLowerCase())throw"'pack' error.";if(i=t[o-1],"l"==a&&i<0&&(i+=4294967296),i>4294967295||i<0)throw"'pack' error.";s=String.fromCharCode(Math.floor(i/16777216))+String.fromCharCode(Math.floor(i%16777216/65536))+String.fromCharCode(Math.floor(i%65536/256))+String.fromCharCode(i%256),r&&(s=s.split("").reverse().join(""))}n+=s,o+=1}return n}function h(e,t){if("string"!=typeof t)throw"'unpack' error. Got invalid type argument.";for(var r,n=0,o=1;o<e.length;o++)if("b"==e[o].toLowerCase())n+=1;else if("h"==e[o].toLowerCase())n+=2;else{if("l"!=e[o].toLowerCase())throw"'unpack' error. Got invalid mark.";n+=4}if(n!=t.length)throw"'unpack' error. Mismatch between symbol and string length. "+n+":"+t.length;if("<"==e[0])r=!0;else{if(">"!=e[0])throw"'unpack' error.";r=!1}for(var i=[],a=0,s=1,c=null,u=null,l=null,h="";u=e[s];){if("b"==u.toLowerCase())l=1,c=(h=t.slice(a,a+l)).charCodeAt(0),"b"==u&&c>=128&&(c-=256);else if("H"==u)l=2,h=t.slice(a,a+l),r&&(h=h.split("").reverse().join("")),c=256*h.charCodeAt(0)+h.charCodeAt(1);else{if("l"!=u.toLowerCase())throw"'unpack' error. "+u;l=4,h=t.slice(a,a+l),r&&(h=h.split("").reverse().join("")),c=16777216*h.charCodeAt(0)+65536*h.charCodeAt(1)+256*h.charCodeAt(2)+h.charCodeAt(3),"l"==u&&c>=2147483648&&(c-=4294967296)}i.push(c),a+=l,s+=1}return i}function d(e,t){for(var r="",n=0;n<t;n++)r+=e;return r}function f(e){if("ÿØ"!=e.slice(0,2))throw"Given data isn't JPEG.";for(var t=2,r=["ÿØ"];;){if("ÿÚ"==e.slice(t,t+2)){r.push(e.slice(t));break}var n=t+h(">H",e.slice(t+2,t+4))[0]+2;if(r.push(e.slice(t,n)),(t=n)>=e.length)throw"Wrong JPEG data."}return r}void 0===u&&(u=function(e){var t,r,n,o,i,a,s="",c=0,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=u.indexOf(e.charAt(c++))<<2|(o=u.indexOf(e.charAt(c++)))>>4,r=(15&o)<<4|(i=u.indexOf(e.charAt(c++)))>>2,n=(3&i)<<6|(a=u.indexOf(e.charAt(c++))),s+=String.fromCharCode(t),64!=i&&(s+=String.fromCharCode(r)),64!=a&&(s+=String.fromCharCode(n));return s});var m={Byte:1,Ascii:2,Short:3,Long:4,Rational:5,Undefined:7,SLong:9,SRational:10},p={Image:{11:{name:"ProcessingSoftware",type:"Ascii"},254:{name:"NewSubfileType",type:"Long"},255:{name:"SubfileType",type:"Short"},256:{name:"ImageWidth",type:"Long"},257:{name:"ImageLength",type:"Long"},258:{name:"BitsPerSample",type:"Short"},259:{name:"Compression",type:"Short"},262:{name:"PhotometricInterpretation",type:"Short"},263:{name:"Threshholding",type:"Short"},264:{name:"CellWidth",type:"Short"},265:{name:"CellLength",type:"Short"},266:{name:"FillOrder",type:"Short"},269:{name:"DocumentName",type:"Ascii"},270:{name:"ImageDescription",type:"Ascii"},271:{name:"Make",type:"Ascii"},272:{name:"Model",type:"Ascii"},273:{name:"StripOffsets",type:"Long"},274:{name:"Orientation",type:"Short"},277:{name:"SamplesPerPixel",type:"Short"},278:{name:"RowsPerStrip",type:"Long"},279:{name:"StripByteCounts",type:"Long"},282:{name:"XResolution",type:"Rational"},283:{name:"YResolution",type:"Rational"},284:{name:"PlanarConfiguration",type:"Short"},290:{name:"GrayResponseUnit",type:"Short"},291:{name:"GrayResponseCurve",type:"Short"},292:{name:"T4Options",type:"Long"},293:{name:"T6Options",type:"Long"},296:{name:"ResolutionUnit",type:"Short"},301:{name:"TransferFunction",type:"Short"},305:{name:"Software",type:"Ascii"},306:{name:"DateTime",type:"Ascii"},315:{name:"Artist",type:"Ascii"},316:{name:"HostComputer",type:"Ascii"},317:{name:"Predictor",type:"Short"},318:{name:"WhitePoint",type:"Rational"},319:{name:"PrimaryChromaticities",type:"Rational"},320:{name:"ColorMap",type:"Short"},321:{name:"HalftoneHints",type:"Short"},322:{name:"TileWidth",type:"Short"},323:{name:"TileLength",type:"Short"},324:{name:"TileOffsets",type:"Short"},325:{name:"TileByteCounts",type:"Short"},330:{name:"SubIFDs",type:"Long"},332:{name:"InkSet",type:"Short"},333:{name:"InkNames",type:"Ascii"},334:{name:"NumberOfInks",type:"Short"},336:{name:"DotRange",type:"Byte"},337:{name:"TargetPrinter",type:"Ascii"},338:{name:"ExtraSamples",type:"Short"},339:{name:"SampleFormat",type:"Short"},340:{name:"SMinSampleValue",type:"Short"},341:{name:"SMaxSampleValue",type:"Short"},342:{name:"TransferRange",type:"Short"},343:{name:"ClipPath",type:"Byte"},344:{name:"XClipPathUnits",type:"Long"},345:{name:"YClipPathUnits",type:"Long"},346:{name:"Indexed",type:"Short"},347:{name:"JPEGTables",type:"Undefined"},351:{name:"OPIProxy",type:"Short"},512:{name:"JPEGProc",type:"Long"},513:{name:"JPEGInterchangeFormat",type:"Long"},514:{name:"JPEGInterchangeFormatLength",type:"Long"},515:{name:"JPEGRestartInterval",type:"Short"},517:{name:"JPEGLosslessPredictors",type:"Short"},518:{name:"JPEGPointTransforms",type:"Short"},519:{name:"JPEGQTables",type:"Long"},520:{name:"JPEGDCTables",type:"Long"},521:{name:"JPEGACTables",type:"Long"},529:{name:"YCbCrCoefficients",type:"Rational"},530:{name:"YCbCrSubSampling",type:"Short"},531:{name:"YCbCrPositioning",type:"Short"},532:{name:"ReferenceBlackWhite",type:"Rational"},700:{name:"XMLPacket",type:"Byte"},18246:{name:"Rating",type:"Short"},18249:{name:"RatingPercent",type:"Short"},32781:{name:"ImageID",type:"Ascii"},33421:{name:"CFARepeatPatternDim",type:"Short"},33422:{name:"CFAPattern",type:"Byte"},33423:{name:"BatteryLevel",type:"Rational"},33432:{name:"Copyright",type:"Ascii"},33434:{name:"ExposureTime",type:"Rational"},34377:{name:"ImageResources",type:"Byte"},34665:{name:"ExifTag",type:"Long"},34675:{name:"InterColorProfile",type:"Undefined"},34853:{name:"GPSTag",type:"Long"},34857:{name:"Interlace",type:"Short"},34858:{name:"TimeZoneOffset",type:"Long"},34859:{name:"SelfTimerMode",type:"Short"},37387:{name:"FlashEnergy",type:"Rational"},37388:{name:"SpatialFrequencyResponse",type:"Undefined"},37389:{name:"Noise",type:"Undefined"},37390:{name:"FocalPlaneXResolution",type:"Rational"},37391:{name:"FocalPlaneYResolution",type:"Rational"},37392:{name:"FocalPlaneResolutionUnit",type:"Short"},37393:{name:"ImageNumber",type:"Long"},37394:{name:"SecurityClassification",type:"Ascii"},37395:{name:"ImageHistory",type:"Ascii"},37397:{name:"ExposureIndex",type:"Rational"},37398:{name:"TIFFEPStandardID",type:"Byte"},37399:{name:"SensingMethod",type:"Short"},40091:{name:"XPTitle",type:"Byte"},40092:{name:"XPComment",type:"Byte"},40093:{name:"XPAuthor",type:"Byte"},40094:{name:"XPKeywords",type:"Byte"},40095:{name:"XPSubject",type:"Byte"},50341:{name:"PrintImageMatching",type:"Undefined"},50706:{name:"DNGVersion",type:"Byte"},50707:{name:"DNGBackwardVersion",type:"Byte"},50708:{name:"UniqueCameraModel",type:"Ascii"},50709:{name:"LocalizedCameraModel",type:"Byte"},50710:{name:"CFAPlaneColor",type:"Byte"},50711:{name:"CFALayout",type:"Short"},50712:{name:"LinearizationTable",type:"Short"},50713:{name:"BlackLevelRepeatDim",type:"Short"},50714:{name:"BlackLevel",type:"Rational"},50715:{name:"BlackLevelDeltaH",type:"SRational"},50716:{name:"BlackLevelDeltaV",type:"SRational"},50717:{name:"WhiteLevel",type:"Short"},50718:{name:"DefaultScale",type:"Rational"},50719:{name:"DefaultCropOrigin",type:"Short"},50720:{name:"DefaultCropSize",type:"Short"},50721:{name:"ColorMatrix1",type:"SRational"},50722:{name:"ColorMatrix2",type:"SRational"},50723:{name:"CameraCalibration1",type:"SRational"},50724:{name:"CameraCalibration2",type:"SRational"},50725:{name:"ReductionMatrix1",type:"SRational"},50726:{name:"ReductionMatrix2",type:"SRational"},50727:{name:"AnalogBalance",type:"Rational"},50728:{name:"AsShotNeutral",type:"Short"},50729:{name:"AsShotWhiteXY",type:"Rational"},50730:{name:"BaselineExposure",type:"SRational"},50731:{name:"BaselineNoise",type:"Rational"},50732:{name:"BaselineSharpness",type:"Rational"},50733:{name:"BayerGreenSplit",type:"Long"},50734:{name:"LinearResponseLimit",type:"Rational"},50735:{name:"CameraSerialNumber",type:"Ascii"},50736:{name:"LensInfo",type:"Rational"},50737:{name:"ChromaBlurRadius",type:"Rational"},50738:{name:"AntiAliasStrength",type:"Rational"},50739:{name:"ShadowScale",type:"SRational"},50740:{name:"DNGPrivateData",type:"Byte"},50741:{name:"MakerNoteSafety",type:"Short"},50778:{name:"CalibrationIlluminant1",type:"Short"},50779:{name:"CalibrationIlluminant2",type:"Short"},50780:{name:"BestQualityScale",type:"Rational"},50781:{name:"RawDataUniqueID",type:"Byte"},50827:{name:"OriginalRawFileName",type:"Byte"},50828:{name:"OriginalRawFileData",type:"Undefined"},50829:{name:"ActiveArea",type:"Short"},50830:{name:"MaskedAreas",type:"Short"},50831:{name:"AsShotICCProfile",type:"Undefined"},50832:{name:"AsShotPreProfileMatrix",type:"SRational"},50833:{name:"CurrentICCProfile",type:"Undefined"},50834:{name:"CurrentPreProfileMatrix",type:"SRational"},50879:{name:"ColorimetricReference",type:"Short"},50931:{name:"CameraCalibrationSignature",type:"Byte"},50932:{name:"ProfileCalibrationSignature",type:"Byte"},50934:{name:"AsShotProfileName",type:"Byte"},50935:{name:"NoiseReductionApplied",type:"Rational"},50936:{name:"ProfileName",type:"Byte"},50937:{name:"ProfileHueSatMapDims",type:"Long"},50938:{name:"ProfileHueSatMapData1",type:"Float"},50939:{name:"ProfileHueSatMapData2",type:"Float"},50940:{name:"ProfileToneCurve",type:"Float"},50941:{name:"ProfileEmbedPolicy",type:"Long"},50942:{name:"ProfileCopyright",type:"Byte"},50964:{name:"ForwardMatrix1",type:"SRational"},50965:{name:"ForwardMatrix2",type:"SRational"},50966:{name:"PreviewApplicationName",type:"Byte"},50967:{name:"PreviewApplicationVersion",type:"Byte"},50968:{name:"PreviewSettingsName",type:"Byte"},50969:{name:"PreviewSettingsDigest",type:"Byte"},50970:{name:"PreviewColorSpace",type:"Long"},50971:{name:"PreviewDateTime",type:"Ascii"},50972:{name:"RawImageDigest",type:"Undefined"},50973:{name:"OriginalRawFileDigest",type:"Undefined"},50974:{name:"SubTileBlockSize",type:"Long"},50975:{name:"RowInterleaveFactor",type:"Long"},50981:{name:"ProfileLookTableDims",type:"Long"},50982:{name:"ProfileLookTableData",type:"Float"},51008:{name:"OpcodeList1",type:"Undefined"},51009:{name:"OpcodeList2",type:"Undefined"},51022:{name:"OpcodeList3",type:"Undefined"}},Exif:{33434:{name:"ExposureTime",type:"Rational"},33437:{name:"FNumber",type:"Rational"},34850:{name:"ExposureProgram",type:"Short"},34852:{name:"SpectralSensitivity",type:"Ascii"},34855:{name:"ISOSpeedRatings",type:"Short"},34856:{name:"OECF",type:"Undefined"},34864:{name:"SensitivityType",type:"Short"},34865:{name:"StandardOutputSensitivity",type:"Long"},34866:{name:"RecommendedExposureIndex",type:"Long"},34867:{name:"ISOSpeed",type:"Long"},34868:{name:"ISOSpeedLatitudeyyy",type:"Long"},34869:{name:"ISOSpeedLatitudezzz",type:"Long"},36864:{name:"ExifVersion",type:"Undefined"},36867:{name:"DateTimeOriginal",type:"Ascii"},36868:{name:"DateTimeDigitized",type:"Ascii"},37121:{name:"ComponentsConfiguration",type:"Undefined"},37122:{name:"CompressedBitsPerPixel",type:"Rational"},37377:{name:"ShutterSpeedValue",type:"SRational"},37378:{name:"ApertureValue",type:"Rational"},37379:{name:"BrightnessValue",type:"SRational"},37380:{name:"ExposureBiasValue",type:"SRational"},37381:{name:"MaxApertureValue",type:"Rational"},37382:{name:"SubjectDistance",type:"Rational"},37383:{name:"MeteringMode",type:"Short"},37384:{name:"LightSource",type:"Short"},37385:{name:"Flash",type:"Short"},37386:{name:"FocalLength",type:"Rational"},37396:{name:"SubjectArea",type:"Short"},37500:{name:"MakerNote",type:"Undefined"},37510:{name:"UserComment",type:"Ascii"},37520:{name:"SubSecTime",type:"Ascii"},37521:{name:"SubSecTimeOriginal",type:"Ascii"},37522:{name:"SubSecTimeDigitized",type:"Ascii"},40960:{name:"FlashpixVersion",type:"Undefined"},40961:{name:"ColorSpace",type:"Short"},40962:{name:"PixelXDimension",type:"Long"},40963:{name:"PixelYDimension",type:"Long"},40964:{name:"RelatedSoundFile",type:"Ascii"},40965:{name:"InteroperabilityTag",type:"Long"},41483:{name:"FlashEnergy",type:"Rational"},41484:{name:"SpatialFrequencyResponse",type:"Undefined"},41486:{name:"FocalPlaneXResolution",type:"Rational"},41487:{name:"FocalPlaneYResolution",type:"Rational"},41488:{name:"FocalPlaneResolutionUnit",type:"Short"},41492:{name:"SubjectLocation",type:"Short"},41493:{name:"ExposureIndex",type:"Rational"},41495:{name:"SensingMethod",type:"Short"},41728:{name:"FileSource",type:"Undefined"},41729:{name:"SceneType",type:"Undefined"},41730:{name:"CFAPattern",type:"Undefined"},41985:{name:"CustomRendered",type:"Short"},41986:{name:"ExposureMode",type:"Short"},41987:{name:"WhiteBalance",type:"Short"},41988:{name:"DigitalZoomRatio",type:"Rational"},41989:{name:"FocalLengthIn35mmFilm",type:"Short"},41990:{name:"SceneCaptureType",type:"Short"},41991:{name:"GainControl",type:"Short"},41992:{name:"Contrast",type:"Short"},41993:{name:"Saturation",type:"Short"},41994:{name:"Sharpness",type:"Short"},41995:{name:"DeviceSettingDescription",type:"Undefined"},41996:{name:"SubjectDistanceRange",type:"Short"},42016:{name:"ImageUniqueID",type:"Ascii"},42032:{name:"CameraOwnerName",type:"Ascii"},42033:{name:"BodySerialNumber",type:"Ascii"},42034:{name:"LensSpecification",type:"Rational"},42035:{name:"LensMake",type:"Ascii"},42036:{name:"LensModel",type:"Ascii"},42037:{name:"LensSerialNumber",type:"Ascii"},42240:{name:"Gamma",type:"Rational"}},GPS:{0:{name:"GPSVersionID",type:"Byte"},1:{name:"GPSLatitudeRef",type:"Ascii"},2:{name:"GPSLatitude",type:"Rational"},3:{name:"GPSLongitudeRef",type:"Ascii"},4:{name:"GPSLongitude",type:"Rational"},5:{name:"GPSAltitudeRef",type:"Byte"},6:{name:"GPSAltitude",type:"Rational"},7:{name:"GPSTimeStamp",type:"Rational"},8:{name:"GPSSatellites",type:"Ascii"},9:{name:"GPSStatus",type:"Ascii"},10:{name:"GPSMeasureMode",type:"Ascii"},11:{name:"GPSDOP",type:"Rational"},12:{name:"GPSSpeedRef",type:"Ascii"},13:{name:"GPSSpeed",type:"Rational"},14:{name:"GPSTrackRef",type:"Ascii"},15:{name:"GPSTrack",type:"Rational"},16:{name:"GPSImgDirectionRef",type:"Ascii"},17:{name:"GPSImgDirection",type:"Rational"},18:{name:"GPSMapDatum",type:"Ascii"},19:{name:"GPSDestLatitudeRef",type:"Ascii"},20:{name:"GPSDestLatitude",type:"Rational"},21:{name:"GPSDestLongitudeRef",type:"Ascii"},22:{name:"GPSDestLongitude",type:"Rational"},23:{name:"GPSDestBearingRef",type:"Ascii"},24:{name:"GPSDestBearing",type:"Rational"},25:{name:"GPSDestDistanceRef",type:"Ascii"},26:{name:"GPSDestDistance",type:"Rational"},27:{name:"GPSProcessingMethod",type:"Undefined"},28:{name:"GPSAreaInformation",type:"Undefined"},29:{name:"GPSDateStamp",type:"Ascii"},30:{name:"GPSDifferential",type:"Short"},31:{name:"GPSHPositioningError",type:"Rational"}},Interop:{1:{name:"InteroperabilityIndex",type:"Ascii"}}};p["0th"]=p.Image,p["1st"]=p.Image,e.TAGS=p,e.ImageIFD={ProcessingSoftware:11,NewSubfileType:254,SubfileType:255,ImageWidth:256,ImageLength:257,BitsPerSample:258,Compression:259,PhotometricInterpretation:262,Threshholding:263,CellWidth:264,CellLength:265,FillOrder:266,DocumentName:269,ImageDescription:270,Make:271,Model:272,StripOffsets:273,Orientation:274,SamplesPerPixel:277,RowsPerStrip:278,StripByteCounts:279,XResolution:282,YResolution:283,PlanarConfiguration:284,GrayResponseUnit:290,GrayResponseCurve:291,T4Options:292,T6Options:293,ResolutionUnit:296,TransferFunction:301,Software:305,DateTime:306,Artist:315,HostComputer:316,Predictor:317,WhitePoint:318,PrimaryChromaticities:319,ColorMap:320,HalftoneHints:321,TileWidth:322,TileLength:323,TileOffsets:324,TileByteCounts:325,SubIFDs:330,InkSet:332,InkNames:333,NumberOfInks:334,DotRange:336,TargetPrinter:337,ExtraSamples:338,SampleFormat:339,SMinSampleValue:340,SMaxSampleValue:341,TransferRange:342,ClipPath:343,XClipPathUnits:344,YClipPathUnits:345,Indexed:346,JPEGTables:347,OPIProxy:351,JPEGProc:512,JPEGInterchangeFormat:513,JPEGInterchangeFormatLength:514,JPEGRestartInterval:515,JPEGLosslessPredictors:517,JPEGPointTransforms:518,JPEGQTables:519,JPEGDCTables:520,JPEGACTables:521,YCbCrCoefficients:529,YCbCrSubSampling:530,YCbCrPositioning:531,ReferenceBlackWhite:532,XMLPacket:700,Rating:18246,RatingPercent:18249,ImageID:32781,CFARepeatPatternDim:33421,CFAPattern:33422,BatteryLevel:33423,Copyright:33432,ExposureTime:33434,ImageResources:34377,ExifTag:34665,InterColorProfile:34675,GPSTag:34853,Interlace:34857,TimeZoneOffset:34858,SelfTimerMode:34859,FlashEnergy:37387,SpatialFrequencyResponse:37388,Noise:37389,FocalPlaneXResolution:37390,FocalPlaneYResolution:37391,FocalPlaneResolutionUnit:37392,ImageNumber:37393,SecurityClassification:37394,ImageHistory:37395,ExposureIndex:37397,TIFFEPStandardID:37398,SensingMethod:37399,XPTitle:40091,XPComment:40092,XPAuthor:40093,XPKeywords:40094,XPSubject:40095,PrintImageMatching:50341,DNGVersion:50706,DNGBackwardVersion:50707,UniqueCameraModel:50708,LocalizedCameraModel:50709,CFAPlaneColor:50710,CFALayout:50711,LinearizationTable:50712,BlackLevelRepeatDim:50713,BlackLevel:50714,BlackLevelDeltaH:50715,BlackLevelDeltaV:50716,WhiteLevel:50717,DefaultScale:50718,DefaultCropOrigin:50719,DefaultCropSize:50720,ColorMatrix1:50721,ColorMatrix2:50722,CameraCalibration1:50723,CameraCalibration2:50724,ReductionMatrix1:50725,ReductionMatrix2:50726,AnalogBalance:50727,AsShotNeutral:50728,AsShotWhiteXY:50729,BaselineExposure:50730,BaselineNoise:50731,BaselineSharpness:50732,BayerGreenSplit:50733,LinearResponseLimit:50734,CameraSerialNumber:50735,LensInfo:50736,ChromaBlurRadius:50737,AntiAliasStrength:50738,ShadowScale:50739,DNGPrivateData:50740,MakerNoteSafety:50741,CalibrationIlluminant1:50778,CalibrationIlluminant2:50779,BestQualityScale:50780,RawDataUniqueID:50781,OriginalRawFileName:50827,OriginalRawFileData:50828,ActiveArea:50829,MaskedAreas:50830,AsShotICCProfile:50831,AsShotPreProfileMatrix:50832,CurrentICCProfile:50833,CurrentPreProfileMatrix:50834,ColorimetricReference:50879,CameraCalibrationSignature:50931,ProfileCalibrationSignature:50932,AsShotProfileName:50934,NoiseReductionApplied:50935,ProfileName:50936,ProfileHueSatMapDims:50937,ProfileHueSatMapData1:50938,ProfileHueSatMapData2:50939,ProfileToneCurve:50940,ProfileEmbedPolicy:50941,ProfileCopyright:50942,ForwardMatrix1:50964,ForwardMatrix2:50965,PreviewApplicationName:50966,PreviewApplicationVersion:50967,PreviewSettingsName:50968,PreviewSettingsDigest:50969,PreviewColorSpace:50970,PreviewDateTime:50971,RawImageDigest:50972,OriginalRawFileDigest:50973,SubTileBlockSize:50974,RowInterleaveFactor:50975,ProfileLookTableDims:50981,ProfileLookTableData:50982,OpcodeList1:51008,OpcodeList2:51009,OpcodeList3:51022,NoiseProfile:51041},e.ExifIFD={ExposureTime:33434,FNumber:33437,ExposureProgram:34850,SpectralSensitivity:34852,ISOSpeedRatings:34855,OECF:34856,SensitivityType:34864,StandardOutputSensitivity:34865,RecommendedExposureIndex:34866,ISOSpeed:34867,ISOSpeedLatitudeyyy:34868,ISOSpeedLatitudezzz:34869,ExifVersion:36864,DateTimeOriginal:36867,DateTimeDigitized:36868,ComponentsConfiguration:37121,CompressedBitsPerPixel:37122,ShutterSpeedValue:37377,ApertureValue:37378,BrightnessValue:37379,ExposureBiasValue:37380,MaxApertureValue:37381,SubjectDistance:37382,MeteringMode:37383,LightSource:37384,Flash:37385,FocalLength:37386,SubjectArea:37396,MakerNote:37500,UserComment:37510,SubSecTime:37520,SubSecTimeOriginal:37521,SubSecTimeDigitized:37522,FlashpixVersion:40960,ColorSpace:40961,PixelXDimension:40962,PixelYDimension:40963,RelatedSoundFile:40964,InteroperabilityTag:40965,FlashEnergy:41483,SpatialFrequencyResponse:41484,FocalPlaneXResolution:41486,FocalPlaneYResolution:41487,FocalPlaneResolutionUnit:41488,SubjectLocation:41492,ExposureIndex:41493,SensingMethod:41495,FileSource:41728,SceneType:41729,CFAPattern:41730,CustomRendered:41985,ExposureMode:41986,WhiteBalance:41987,DigitalZoomRatio:41988,FocalLengthIn35mmFilm:41989,SceneCaptureType:41990,GainControl:41991,Contrast:41992,Saturation:41993,Sharpness:41994,DeviceSettingDescription:41995,SubjectDistanceRange:41996,ImageUniqueID:42016,CameraOwnerName:42032,BodySerialNumber:42033,LensSpecification:42034,LensMake:42035,LensModel:42036,LensSerialNumber:42037,Gamma:42240},e.GPSIFD={GPSVersionID:0,GPSLatitudeRef:1,GPSLatitude:2,GPSLongitudeRef:3,GPSLongitude:4,GPSAltitudeRef:5,GPSAltitude:6,GPSTimeStamp:7,GPSSatellites:8,GPSStatus:9,GPSMeasureMode:10,GPSDOP:11,GPSSpeedRef:12,GPSSpeed:13,GPSTrackRef:14,GPSTrack:15,GPSImgDirectionRef:16,GPSImgDirection:17,GPSMapDatum:18,GPSDestLatitudeRef:19,GPSDestLatitude:20,GPSDestLongitudeRef:21,GPSDestLongitude:22,GPSDestBearingRef:23,GPSDestBearing:24,GPSDestDistanceRef:25,GPSDestDistance:26,GPSProcessingMethod:27,GPSAreaInformation:28,GPSDateStamp:29,GPSDifferential:30,GPSHPositioningError:31},e.InteropIFD={InteroperabilityIndex:1},e.GPSHelper={degToDmsRational:function(e){var t=e%1*60,r=t%1*60;return[[Math.floor(e),1],[Math.floor(t),1],[Math.round(100*r),100]]},dmsRationalToDeg:function(e,t){return("S"===t||"W"===t?-1:1)*e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}};const g=e;errorHandling.scriptsLoaded.piexif=!0;var y=r(287).hp;const v=function(e){Math.round;var t,r,n,o,i,a=Math.floor,s=new Array(64),c=new Array(64),u=new Array(64),l=new Array(64),h=new Array(65535),d=new Array(65535),f=new Array(64),m=new Array(64),p=[],g=0,v=7,P=new Array(64),E=new Array(64),I=new Array(64),w=new Array(256),S=new Array(2048),b=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],x=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],A=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],k=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function D(e,t){for(var r=0,n=0,o=new Array,i=1;i<=16;i++){for(var a=1;a<=e[i];a++)o[t[n]]=[],o[t[n]][0]=r,o[t[n]][1]=i,n++,r++;r*=2}return o}function O(e){for(var t=e[0],r=e[1]-1;r>=0;)t&1<<r&&(g|=1<<v),r--,--v<0&&(255==g?(G(255),G(0)):G(g),v=7,g=0)}function G(e){p.push(e)}function M(e){G(e>>8&255),G(255&e)}function F(e,t,r,n,o){for(var i,a=o[0],s=o[240],c=function(e,t){var r,n,o,i,a,s,c,u,l,h,d=0;for(l=0;l<8;++l){r=e[d],n=e[d+1],o=e[d+2],i=e[d+3],a=e[d+4],s=e[d+5],c=e[d+6];var m=r+(u=e[d+7]),p=r-u,g=n+c,y=n-c,v=o+s,P=o-s,E=i+a,I=i-a,w=m+E,S=m-E,b=g+v,C=g-v;e[d]=w+b,e[d+4]=w-b;var L=.707106781*(C+S);e[d+2]=S+L,e[d+6]=S-L;var B=.382683433*((w=I+P)-(C=y+p)),x=.5411961*w+B,R=1.306562965*C+B,T=.707106781*(b=P+y),A=p+T,k=p-T;e[d+5]=k+x,e[d+3]=k-x,e[d+1]=A+R,e[d+7]=A-R,d+=8}for(d=0,l=0;l<8;++l){r=e[d],n=e[d+8],o=e[d+16],i=e[d+24],a=e[d+32],s=e[d+40],c=e[d+48];var D=r+(u=e[d+56]),O=r-u,G=n+c,M=n-c,F=o+s,U=o-s,_=i+a,j=i-a,N=D+_,H=D-_,z=G+F,V=G-F;e[d]=N+z,e[d+32]=N-z;var Y=.707106781*(V+H);e[d+16]=H+Y,e[d+48]=H-Y;var $=.382683433*((N=j+U)-(V=M+O)),X=.5411961*N+$,J=1.306562965*V+$,W=.707106781*(z=U+M),q=O+W,Z=O-W;e[d+40]=Z+X,e[d+24]=Z-X,e[d+8]=q+J,e[d+56]=q-J,d++}for(l=0;l<64;++l)h=e[l]*t[l],f[l]=h>0?h+.5|0:h-.5|0;return f}(e,t),u=0;u<64;++u)m[b[u]]=c[u];var l=m[0]-r;r=m[0],0==l?O(n[0]):(O(n[d[i=32767+l]]),O(h[i]));for(var p=63;p>0&&0==m[p];p--);if(0==p)return O(a),r;for(var g,y=1;y<=p;){for(var v=y;0==m[y]&&y<=p;++y);var P=y-v;if(P>=16){g=P>>4;for(var E=1;E<=g;++E)O(s);P&=15}i=32767+m[y],O(o[(P<<4)+d[i]]),O(h[i]),y++}return 63!=p&&O(a),r}function U(e){e<=0&&(e=1),e>100&&(e=100),i!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;r<64;r++){var n=a((t[r]*e+50)/100);n<1?n=1:n>255&&(n=255),s[b[r]]=n}for(var o=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],i=0;i<64;i++){var h=a((o[i]*e+50)/100);h<1?h=1:h>255&&(h=255),c[b[i]]=h}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,m=0;m<8;m++)for(var p=0;p<8;p++)u[f]=1/(s[b[f]]*d[m]*d[p]*8),l[f]=1/(c[b[f]]*d[m]*d[p]*8),f++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),i=e)}this.encode=function(e,i){var a;(new Date).getTime(),i&&U(i),p=new Array,g=0,v=7,M(65496),M(65504),M(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),M(1),M(1),G(0),G(0),void 0!==(a=e.comments)&&a.constructor===Array&&a.forEach((function(e){if("string"==typeof e){M(65534);var t,r=e.length;for(M(r+2),t=0;t<r;t++)G(e.charCodeAt(t))}})),function(e){if(e){M(65505),69===e[0]&&120===e[1]&&105===e[2]&&102===e[3]?M(e.length+2):(M(e.length+5+2),G(69),G(120),G(105),G(102),G(0));for(var t=0;t<e.length;t++)G(e[t])}}(e.exifBuffer),function(){M(65499),M(132),G(0);for(var e=0;e<64;e++)G(s[e]);G(1);for(var t=0;t<64;t++)G(c[t])}(),function(e,t){M(65472),M(17),G(8),M(t),M(e),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)}(e.width,e.height),function(){M(65476),M(418),G(0);for(var e=0;e<16;e++)G(C[e+1]);for(var t=0;t<=11;t++)G(L[t]);G(16);for(var r=0;r<16;r++)G(B[r+1]);for(var n=0;n<=161;n++)G(x[n]);G(1);for(var o=0;o<16;o++)G(R[o+1]);for(var i=0;i<=11;i++)G(T[i]);G(17);for(var a=0;a<16;a++)G(A[a+1]);for(var s=0;s<=161;s++)G(k[s])}(),M(65498),M(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var h=0,d=0,f=0;g=0,v=7,this.encode.displayName="_encode_";for(var m,w,b,D,_,j,N,H,z,V=e.data,Y=e.width,$=e.height,X=4*Y,J=0;J<$;){for(m=0;m<X;){for(j=_=X*J+m,N=-1,H=0,z=0;z<64;z++)j=_+(H=z>>3)*X+(N=4*(7&z)),J+H>=$&&(j-=X*(J+1+H-$)),m+N>=X&&(j-=m+N-X+4),w=V[j++],b=V[j++],D=V[j++],P[z]=(S[w]+S[b+256|0]+S[D+512|0]>>16)-128,E[z]=(S[w+768|0]+S[b+1024|0]+S[D+1280|0]>>16)-128,I[z]=(S[w+1280|0]+S[b+1536|0]+S[D+1792|0]>>16)-128;h=F(P,u,h,t,n),d=F(E,l,d,r,o),f=F(I,l,f,r,o),m+=32}J+=8}if(v>=0){var W=[];W[1]=v+1,W[0]=(1<<v+1)-1,O(W)}return M(65497),y.from(p)},(new Date).getTime(),e||(e=50),function(){for(var e=String.fromCharCode,t=0;t<256;t++)w[t]=e(t)}(),t=D(C,L),r=D(R,T),n=D(B,x),o=D(A,k),function(){for(var e=1,t=2,r=1;r<=15;r++){for(var n=e;n<t;n++)d[32767+n]=r,h[32767+n]=[],h[32767+n][1]=r,h[32767+n][0]=n;for(var o=-(t-1);o<=-e;o++)d[32767+o]=r,h[32767+o]=[],h[32767+o][1]=r,h[32767+o][0]=t-1+o;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)S[e]=19595*e,S[e+256|0]=38470*e,S[e+512|0]=7471*e+32768,S[e+768|0]=-11059*e,S[e+1024|0]=-21709*e,S[e+1280|0]=32768*e+8421375,S[e+1536|0]=-27439*e,S[e+1792|0]=-5329*e}(),U(e),(new Date).getTime()};errorHandling.scriptsLoaded.encoder=!0;var P={};function E(e,t){for(var r=[],n=t-1;n>=0;){var o=255&e;r[n--]=o,e>>=8}return r=r.map((function(e){return String.fromCharCode(e)})),r.join("")}function I(e){for(var t=0,r=0;r<e.length;r++)t=t<<8|255&e.charCodeAt(r);return t}P.PNG_SIG=String.fromCharCode(137,80,78,71,13,10,26,10),P.readFileSync=function(e){return fs.readFileSync(e,"binary")},P.writeFileSync=function(e,t){fs.writeFileSync(e,t,"binary")},P.isPNG=function(e){return e.substring(0,8)==P.PNG_SIG},P.splitChunk=function(e){var t=e.substring(0,8);if(!P.isPNG(t))return!1;e=e.substring(8);for(var r=[];""!=e;){var n={},o=I(e.substring(0,4));o<0&&(o=0);var i=e.substring(0,o+12);e=e.substring(o+12),n.size=o,n.type=i.substring(4,8),n.data=i.substring(8,8+o),n.crc=I(i.substring(8+o,12+o)),r.push(n)}return r},P.joinChunk=function(e){var t=P.PNG_SIG;for(var r in e){var n=e[r],o="";o+=E(n.size,4),o+=n.type,o+=n.data,t+=o+=E(n.crc,4)}return t},P.createChunk=function(e,t){var r={};return r.type=e,r.data=t,r.size=t.length,r.crc=function(e){for(var t=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],r=-1,n=0;n<e.length;n++)r=r>>>8^t[255&(r^e.charCodeAt(n))];return~r>>>0}(e+t),r},P.itos=E,P.stoi=I;const w=P;function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function b(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return C(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function L(){L=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new k(n||[]);return o(a,"_invoke",{value:x(e,r,s)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="suspendedYield",m="executing",p="completed",g={};function y(){}function v(){}function P(){}var E={};u(E,a,(function(){return this}));var I=Object.getPrototypeOf,w=I&&I(I(D([])));w&&w!==r&&n.call(w,a)&&(E=w);var b=P.prototype=y.prototype=Object.create(E);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function B(e,t){function r(o,i,a,s){var c=h(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==S(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function x(t,r,n){var o=d;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=R(s,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?p:f,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=p,n.method="throw",n.arg=u.arg)}}}function R(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,R(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=h(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(S(t)+" is not iterable")}return v.prototype=P,o(b,"constructor",{value:P,configurable:!0}),o(P,"constructor",{value:v,configurable:!0}),v.displayName=u(P,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,P):(e.__proto__=P,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},C(B.prototype),u(B.prototype,s,(function(){return this})),t.AsyncIterator=B,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new B(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(b),u(b,c,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function B(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){B(i,n,o,a,s,"next",e)}function s(e){B(i,n,o,a,s,"throw",e)}a(void 0)}))}}function R(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0);var r=t.toDataURL();return t.remove(),r}function T(e){return Math.min(255,Math.max(0,e))}function A(e,t){if(alert("无法加载图像, 请确定文件类型和状态。"+e),errorHandling.defaultImg[errorHandling.currCanvasIndex].src){var r=new Image;r.src=R(errorHandling.defaultImg[errorHandling.currCanvasIndex]),r.onload=function(){t(r)}}}function k(e,t,r){void 0!==r&&(document.getElementById("decodeContrastRange").value=100-r,PrismProcessor.PrismDecoder.contrast=100-r),void 0!==e?(document.getElementById("decodeReverseInput").checked=e,PrismProcessor.PrismDecoder.reverse=e):e=document.getElementById("decodeReverseInput").checked,void 0!==t&&(e?(document.getElementById("decodeThresholdRange").value=255-t,PrismProcessor.PrismDecoder.threshold=255-t):(document.getElementById("decodeThresholdRange").value=t,PrismProcessor.PrismDecoder.threshold=t))}function D(e){if(console.log("reading from Metadata: "+e),void 0===e)return{isValid:!1};var t,r,n=50;switch(e.length){case 5:if(n=parseInt(e.slice(3,5),16),isNaN(n))return{isValid:!1};case 3:if(r=parseInt(e.slice(1,3),16),isNaN(r))return{isValid:!1};case 1:if("0"!==e[0]&&"1"!==e[0])return{isValid:!1};t="1"===e[0];break;default:return{isValid:!1}}return{isValid:!0,isReverse:t,innerThreshold:r,innerContrast:n}}function O(e){if(applicationState.isReadMetadata)try{var t=D(g.load(e.src)["0th"][g.ImageIFD.Make]),r=t.isValid,n=t.isReverse,o=t.innerThreshold,i=t.innerContrast;r&&k(n,o,i)}catch(e){throw e}}function G(e){if(applicationState.isReadMetadata)try{var t=atob(e.src.split(",")[1]),r=w.splitChunk(t);for(var n in r){var o=r[n];if("tEXt"===o.type||"PRSM"===o.type){var i=D(o.data),a=i.isValid,s=i.isReverse,c=i.innerThreshold,u=i.innerContrast;a&&k(s,c,u);break}}}catch(e){throw e}}function M(e){return new Promise((function(t,r){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=function(e){r(e)},n.readAsDataURL(e)}))}function F(e){return U.apply(this,arguments)}function U(){return U=x(L().mark((function e(t){var r,n=arguments;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:5e3,e.abrupt("return",new Promise((function(e,n){var o,i=new Image;if(i.onload=function(){if(clearTimeout(o),0===errorHandling.currCanvasIndex)try{i.src.startsWith("data:image/jpeg;base64,")?O(i):i.src.startsWith("data:image/png;base64,")&&G(i)}catch(e){console.error("failed to read metadata: "+e)}e(i)},i.onerror=function(e){clearTimeout(o),n(e)},o=setTimeout((function(){i.src="",n(new Error("加载图像超时"))}),r),"string"==typeof t)i.crossOrigin="anonymous",i.src=t;else if(t instanceof File){var a=new FileReader;a.onload=function(e){i.src=e.target.result},a.onerror=function(e){clearTimeout(o),n(e)},a.readAsDataURL(t)}else clearTimeout(o),n(new Error("不支持的输入类型"))})));case 2:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function _(){return(_=x(L().mark((function e(t,r){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F(t).then((function(e){r(e)})).catch((function(e){A(e,r)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=x(L().mark((function e(t,r){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F(t.target.previousElementSibling.value).then((function(e){r(e)})).catch((function(e){A(e,r)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=x(L().mark((function e(t,r){var n,o,i,a;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(t.clipboardData||t.originalEvent.clipboardData).items,o=b(n);try{for(o.s();!(i=o.n()).done;)-1!==(a=i.value).type.indexOf("image")&&F(a.getAsFile()).then((function(e){r(e)})).catch((function(e){A(e,r)}))}catch(e){o.e(e)}finally{o.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=x(L().mark((function e(t){var r,n,o,i,a,s;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.permissions.query({name:"clipboard-read"});case 3:if("granted"!==(r=e.sent).state&&"prompt"!==r.state){e.next=36;break}return e.next=7,navigator.clipboard.read();case 7:n=e.sent,o=b(n),e.prev=9,o.s();case 11:if((i=o.n()).done){e.next=26;break}if(!(a=i.value).types.some((function(e){return e.startsWith("image/")}))){e.next=23;break}return e.next=16,a.getType(a.types.find((function(e){return e.startsWith("image/")})));case 16:return s=e.sent,e.next=19,M(s);case 19:F(e.sent).then((function(e){t(e)})).catch((function(e){throw e})),e.next=24;break;case 23:alert("剪贴板中没有图片");case 24:e.next=11;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(9),o.e(e.t0);case 31:return e.prev=31,o.f(),e.finish(31);case 34:e.next=37;break;case 36:alert("没有剪贴板读取权限");case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(0),A(e.t1,t);case 42:case"end":return e.stop()}}),e,null,[[0,39],[9,28,31,34]])})))).apply(this,arguments)}function z(){return(z=x(L().mark((function e(t,r){var n,o,i;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.dataTransfer.items){n=b(t.dataTransfer.items);try{for(n.s();!(o=n.n()).done;)"file"===(i=o.value).kind&&F(i.getAsFile()).then((function(e){r(e)})).catch((function(e){A(e,r)}))}catch(e){n.e(e)}finally{n.f()}}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){if(applicationState.isDownloadNotSupported){for(var r=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(r.length),i=new Uint8Array(o),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);var s=new Blob([o],{type:n}),c=URL.createObjectURL(s),u=window.open();u.document.write('<img src="'+c+'" alt="'+t+'">'),u.document.close(),u.addEventListener("beforeunload",(function(){URL.revokeObjectURL(c)}))}else{var l=document.createElement("a");l.href=e,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l)}}function Y(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=PrismProcessor.PrismEncoder.isEncodeReverse,o=PrismProcessor.PrismEncoder.innerThreshold,i=PrismProcessor.PrismEncoder.innerContrast,a=document.getElementById(e);if(t)return r?function(e,t,r,n){var o=atob(e.split(",")[1]),i=w.splitChunk(o),a=$(t,r,n),s=!1;for(var c in i){var u=i[c];if("tEXt"===u.type){u.data=a,i[c]=u,s=!0;break}}if(!s){var l=w.createChunk("tEXt",a),h=i.pop();i.push(l),i.push(h)}var d=w.joinChunk(i);return"data:image/png;base64,".concat(btoa(d))}(a.toDataURL("image/png"),n,o,i):a.toDataURL("image/png");for(var s=a.getContext("2d").getImageData(0,0,a.width,a.height),c=new v(100).encode(s,100),u="",l=new Uint8Array(c),h=l.byteLength,d=0;d<h;d++)u+=String.fromCharCode(l[d]);return r?function(e,t,r,n){var o=$(t,r,n),i={};i[g.ImageIFD.Make]=o;var a={"0th":i},s=g.dump(a);return g.insert(s,e)}("data:image/jpeg;base64,".concat(btoa(u)),n,o,i):"data:image/jpeg;base64,".concat(btoa(u))}function $(e,t,r){var n=(e?"1":"0")+t.toString(16).padStart(2,"0")+r.toString(16).padStart(2,"0");return console.log("writing to Metadata: "+n),n}errorHandling.scriptsLoaded.png_metadata=!0,applicationState.currCanvasIndex=0;const X={copyImage:R,adjustContrastImgData:function(e,t){t=5.1*(t-50);for(var r=e.data,n=259*(t+255)/(255*(259-t)),o=0;o<r.length;o+=4)r[o]=T(n*(r[o]-128)+128),r[o+1]=T(n*(r[o+1]-128)+128),r[o+2]=T(n*(r[o+2]-128)+128)},cloneImageData:function(e){return new ImageData(new Uint8ClampedArray(e.data),e.width,e.height)},setDecodeValues:k,updateImageFromFile:function(e,t){return _.apply(this,arguments)},updateImageFromURL:function(e,t){return j.apply(this,arguments)},updateImageFromClipboard:function(e,t){return N.apply(this,arguments)},updateImageFromClipboardDirect:function(e){return H.apply(this,arguments)},dragDropLoadImage:function(e,t){return z.apply(this,arguments)},downloadFromLink:V,saveImageFromCanvas:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(new Date).getTime();PrismProcessor.PrismEncoder.isCoverMirage&&!t&&alert("JPEG格式不支持幻影坦克！请谨慎选择。");var o="output_".concat(n,".").concat(t?"png":"jpg");V(Y(e,t,r),o)},generateUrlFromCanvas:Y};function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q(n.key),n)}}function q(e){var t=function(e){if("object"!=J(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==J(t)?t:t+""}errorHandling.scriptsLoaded.ImageLoader=!0;const Z=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.img=null,this.imgData=null,this.coverProcessMethod=r.decodeMethod,this.threshold=r.decodeThreshold,this.reverse=r.isDecodeReverse,this.contrast=r.decodeContrast,this.decodedImgData=null,this.decodeCanvas=document.getElementById(t)},(t=[{key:"showImage",value:function(e){this.decodeCanvas.getContext("2d").putImageData(e,0,0)}},{key:"updateImage",value:function(e){this.img=e;var t=this.decodeCanvas.getContext("2d");this.decodeCanvas.width=this.img.width,this.decodeCanvas.height=this.img.height,t.drawImage(this.img,0,0,this.decodeCanvas.width,this.decodeCanvas.height),this.imgData=t.getImageData(0,0,this.decodeCanvas.width,this.decodeCanvas.height),this.processImage()}},{key:"processImage",value:function(){this.decodedImgData=X.cloneImageData(this.imgData);var e=this.decodedImgData.data;if(this.reverse)for(t=255/(255-this.threshold),r=0;r<e.length;r+=4)(e[r]+e[r+1]+e[r+2])/3>=this.threshold?(e[r]=(e[r]-this.threshold)*t,e[r+1]=(e[r+1]-this.threshold)*t,e[r+2]=(e[r+2]-this.threshold)*t):this.processCoverPixel(e,r);else for(var t=255/this.threshold,r=0;r<e.length;r+=4)(e[r]+e[r+1]+e[r+2])/3<=this.threshold?(e[r]*=t,e[r+1]*=t,e[r+2]*=t):this.processCoverPixel(e,r);50!==this.contrast?this.adjustContrast():this.showImage(this.decodedImgData)}},{key:"processCoverPixel",value:function(e,t){var r=4*this.imgData.width,n=t%r,o=Math.floor(t/r);switch(this.coverProcessMethod){case"luavg":if(n&&o){e[t]=(e[t-4]+e[t-r]+e[t-r-4])/3,e[t+1]=(e[t-3]+e[t-r+1]+e[t-r-3])/3,e[t+2]=(e[t-2]+e[t-r+2]+e[t-r-2])/3,e[t+3]=(e[t-1]+e[t-r+3]+e[t-r-1])/3;break}case"lcopy":if(n){e[t]=e[t-4],e[t+1]=e[t-3],e[t+2]=e[t-2],e[t+3]=e[t-1];break}case"ucopy":if(o){e[t]=e[t-r],e[t+1]=e[t-r+1],e[t+2]=e[t-r+2],e[t+3]=e[t-r+3];break}case"trans":e[t+3]=0;break;case"black":e[t]=0,e[t+1]=0,e[t+2]=0,e[t+3]=255;break;case"white":e[t]=255,e[t+1]=255,e[t+2]=255,e[t+3]=255}}},{key:"adjustContrast",value:function(){var e=X.cloneImageData(this.decodedImgData);X.adjustContrastImgData(e,this.contrast),this.showImage(e)}}])&&W(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ee(n.key),n)}}function ee(e){var t=function(e){if("object"!=K(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:t+""}errorHandling.scriptsLoaded.PrismDecoder=!0;const te=function(){return e=function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.innerImg=null,this.coverImg=null,this.innerImgdata=null,this.coverImgdata=null,this.innerImgdataContrast=null,this.coverImgdataContrast=null,this.innerContrast=o.innerContrast,this.coverContrast=o.coverContrast,this.innerThreshold=o.innerThreshold,this.coverThreshold=o.coverThreshold,this.width=0,this.heigt=0,this.isCoverGray=o.isCoverGray,this.isEncodeReverse=o.isEncodeReverse,this.isCoverMirage=o.isCoverMirage,this.method=o.encodeMethod,this.size=o.size,this.innerCanvas=document.getElementById(t),this.coverCanvas=document.getElementById(r),this.outputCanvas=document.getElementById(n),this.weight_r=.299,this.weight_g=.587,this.weight_b=.114},(t=[{key:"updateInnerImage",value:function(e){this.innerImg=e;var t=this.innerCanvas.getContext("2d");if(e.width>e.height)if(e.width>this.size){var r=this.size/e.width;this.innerCanvas.width=this.size,this.innerCanvas.height=e.height*r}else this.innerCanvas.width=this.size,this.innerCanvas.height=e.height*this.size/e.width;else if(e.height>this.size){var n=this.size/e.height;this.innerCanvas.width=e.width*n,this.innerCanvas.height=this.size}else this.innerCanvas.width=e.width*this.size/e.height,this.innerCanvas.height=this.size;this.width=this.innerCanvas.width,this.height=this.innerCanvas.height,t.drawImage(this.innerImg,0,0,this.innerCanvas.width,this.innerCanvas.height),this.innerImgdata=t.getImageData(0,0,this.innerCanvas.width,this.innerCanvas.height),50!==this.innerContrast&&this.adjustInnerContrast(),this.coverImgdata&&this.updateCoverImage(this.coverImg)}},{key:"updateCoverImage",value:function(e){if(this.coverImg=e,this.innerImgdata){var t,r=e.width/e.height,n=this.width/this.height;if(n>r){var o=e.width/n;t={x:0,y:(e.height-o)/2,width:e.width,height:o}}else{var i=e.height*n;t={x:(e.width-i)/2,y:0,width:i,height:e.height}}this.coverCanvas.width=this.width,this.coverCanvas.height=this.height;var a=this.coverCanvas.getContext("2d");a.drawImage(e,t.x,t.y,t.width,t.height,0,0,this.width,this.height),this.coverImgdata=a.getImageData(0,0,this.coverCanvas.width,this.coverCanvas.height),this.isCoverGray&&this.processCoverGray(),50!==this.coverContrast&&this.adjustCoverContrast(),this.processImage()}else{var s=this.coverCanvas.getContext("2d");this.coverCanvas.width=e.width,this.coverCanvas.height=e.height,s.drawImage(this.coverImg,0,0,this.coverCanvas.width,this.coverCanvas.height),this.coverImgdata=s.getImageData(0,0,this.coverCanvas.width,this.coverCanvas.height)}}},{key:"processCoverGray",value:function(){for(var e=this.coverImgdata.data,t=0;t<e.length;t+=4){var r=Math.floor(e[t]*this.weight_r+e[t+1]*this.weight_g+e[t+2]*this.weight_b);e[t]=r,e[t+1]=r,e[t+2]=r}this.showImage(this.coverImgdata,this.coverCanvas)}},{key:"compressLow",value:function(e,t,r,n){e[r]=Math.floor(t[r]*n),e[r+1]=Math.floor(t[r+1]*n),e[r+2]=Math.floor(t[r+2]*n),e[r+3]=t[r+3]}},{key:"compressHigh",value:function(e,t,r,n,o){e[r]=Math.floor(t[r]*n+o),e[r+1]=Math.floor(t[r+1]*n+o),e[r+2]=Math.floor(t[r+2]*n+o),e[r+3]=t[r+3]}},{key:"compressClone",value:function(e,t,r){e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2],e[r+3]=t[r+3]}},{key:"isInnerPixel_slash",value:function(e,t,r){return(e+t)%r==0}},{key:"isInnerPixel_col",value:function(e,t,r){return e%r==0}},{key:"isInnerPixel_row",value:function(e,t,r){return t%r==0}},{key:"processImage",value:function(){var e,t,r,n,o,i,a=50===this.innerContrast?this.innerImgdata.data:this.innerImgdataContrast.data,s=50===this.coverContrast?this.coverImgdata.data:this.coverImgdataContrast.data,c=new Uint8ClampedArray(a.length),u=this.innerThreshold/255,l=1-this.coverThreshold/255;switch(!1===this.isEncodeReverse?(e=this.compressLow,t=this.isCoverMirage?this.compressClone:this.compressHigh,r=0,n=this.coverThreshold):(e=this.compressHigh,t=this.isCoverMirage?this.compressClone:this.compressLow,r=255-this.innerThreshold,n=0),this.method){case"chess":o=this.isInnerPixel_slash,i=2;break;case"gap_2":o=this.isInnerPixel_slash,i=3;break;case"gap_3":o=this.isInnerPixel_slash,i=4;break;case"gap_5":o=this.isInnerPixel_slash,i=6;break;case"col_1":o=this.isInnerPixel_col,i=2;break;case"row_1":o=this.isInnerPixel_row,i=2}for(var h=0,d=0;h<a.length;h+=4,d++)o(d%this.width,Math.floor(d/this.width),i)?e(c,a,h,u,r):t(c,s,h,l,n);this.outputCanvas.width=this.width,this.outputCanvas.height=this.height;var f=this.outputCanvas.getContext("2d"),m=new ImageData(c,this.width,this.height);f.putImageData(m,0,0)}},{key:"showImage",value:function(e,t){t.getContext("2d").putImageData(e,0,0)}},{key:"adjustInnerContrast",value:function(){this.innerImgdataContrast=X.cloneImageData(this.innerImgdata),X.adjustContrastImgData(this.innerImgdataContrast,this.innerContrast),this.showImage(this.innerImgdataContrast,this.innerCanvas)}},{key:"adjustCoverContrast",value:function(){this.coverImgdataContrast=X.cloneImageData(this.coverImgdata),X.adjustContrastImgData(this.coverImgdataContrast,this.coverContrast),this.showImage(this.coverImgdataContrast,this.coverCanvas)}}])&&Q(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();errorHandling.scriptsLoaded.PrismEncoder=!0;const re=function(){document.getElementById("togglePrivacyPolicy").addEventListener("click",(function(e){var t=document.getElementById("privacyPolicy");"none"===window.getComputedStyle(t).display?(t.style.display="block",e.target.textContent="隐藏使用须知",window.scrollTo(0,document.body.scrollHeight)):(t.style.display="none",e.target.textContent="显示使用须知")})),document.getElementById("toggleVersionRecord").addEventListener("click",(function(e){var t=document.getElementById("versionRecordTable");"none"===window.getComputedStyle(t).display?(t.style.display="block",e.target.textContent="隐藏主要更新记录",window.scrollTo(0,document.body.scrollHeight)):(t.style.display="none",e.target.textContent="显示主要更新记录")})),document.addEventListener("dragover",(function(e){e.preventDefault()})),document.getElementById("isDarkmodeCheckbox").addEventListener("change",(function(e){var t=e.target.checked?"dark":"light";applyTheme(t)}))};function ne(e){applicationState.isReadMetadata=e.target.checked}function oe(e){var t=e.target.files[0];errorHandling.currCanvasIndex=0,X.updateImageFromFile(t,(function(e){PrismProcessor.PrismDecoder.updateImage(e)})),e.target.value=""}function ie(e){errorHandling.currCanvasIndex=0,X.updateImageFromURL(e,(function(e){PrismProcessor.PrismDecoder.updateImage(e)})),e.target.previousElementSibling.value=""}function ae(e){errorHandling.currCanvasIndex=0,X.updateImageFromClipboard(e,(function(e){PrismProcessor.PrismDecoder.updateImage(e)}))}function se(){errorHandling.currCanvasIndex=0,document.body.focus(),new ClipboardEvent("paste"),X.updateImageFromClipboardDirect((function(e){PrismProcessor.PrismDecoder.updateImage(e)}))}function ce(e){errorHandling.currCanvasIndex=0,X.dragDropLoadImage(e,(function(e){PrismProcessor.PrismDecoder.updateImage(e)}))}function ue(e){PrismProcessor.PrismDecoder.threshold=parseInt(e.target.value,10),PrismProcessor.PrismDecoder.img&&PrismProcessor.PrismDecoder.processImage()}function le(e){PrismProcessor.PrismDecoder.contrast=parseInt(e.target.value,10),PrismProcessor.PrismDecoder.img&&PrismProcessor.PrismDecoder.adjustContrast()}function he(){document.getElementById("decodeContrastRange").value=50,PrismProcessor.PrismDecoder.contrast=50,PrismProcessor.PrismDecoder.img&&PrismProcessor.PrismDecoder.adjustContrast()}function de(e){PrismProcessor.PrismDecoder.coverProcessMethod=e.target.value,PrismProcessor.PrismDecoder.img&&PrismProcessor.PrismDecoder.processImage()}function fe(e){PrismProcessor.PrismDecoder.reverse=e.target.checked,PrismProcessor.PrismDecoder.img&&PrismProcessor.PrismDecoder.processImage()}function me(){X.saveImageFromCanvas("decodeCanvas")}function pe(){var e=document.createElement("canvas");e.id="temp_srcCanvas",e.width=PrismProcessor.PrismDecoder.img.width,e.height=PrismProcessor.PrismDecoder.img.height,e.style.display="none",e.getContext("2d").drawImage(PrismProcessor.PrismDecoder.img,0,0),document.body.appendChild(e),X.saveImageFromCanvas("temp_srcCanvas",applicationState.isPng,!1),e.remove()}errorHandling.scriptsLoaded.UniversalListeners=!0;const ge={decodeSetupEventListeners:function(){document.getElementById("isReadMetadataCheckBox").addEventListener("change",ne),document.getElementById("decodeImageFileInput").addEventListener("change",oe),document.getElementById("decodeLoadImageButton").addEventListener("click",ie),applicationState.isOnPhone?document.getElementById("decodePasteButtonInput").addEventListener("click",se):(window.addEventListener("paste",ae),document.body.addEventListener("drop",ce)),document.getElementById("decodeThresholdRange").addEventListener("input",ue),document.getElementById("decodeMethodSelect").addEventListener("change",de),document.getElementById("decodeReverseInput").addEventListener("change",fe),document.getElementById("decodeContrastRange").addEventListener("input",le),document.getElementById("decodeResetContrastButton").addEventListener("click",he),document.getElementById("decodeSaveImageButton").addEventListener("click",me),document.getElementById("decodeSaveSrcImageButton").addEventListener("click",pe)},decodeRemoveEventListeners:function(){document.getElementById("isReadMetadataCheckBox").removeEventListener("change",ne),document.getElementById("decodeImageFileInput").removeEventListener("change",oe),document.getElementById("decodeLoadImageButton").removeEventListener("click",ie),applicationState.isOnPhone?document.getElementById("decodePasteButtonInput").removeEventListener("click",se):(window.removeEventListener("paste",ae),document.body.removeEventListener("drop",ce)),document.getElementById("decodeThresholdRange").removeEventListener("input",ue),document.getElementById("decodeMethodSelect").removeEventListener("change",de),document.getElementById("decodeReverseInput").removeEventListener("change",fe),document.getElementById("decodeContrastRange").removeEventListener("input",le),document.getElementById("decodeResetContrastButton").removeEventListener("click",he),document.getElementById("decodeSaveImageButton").removeEventListener("click",me),document.getElementById("decodeSaveSrcImageButton").removeEventListener("click",pe)}};function ye(e){errorHandling.currCanvasIndex=1;var t=e.target.files[0];X.updateImageFromFile(t,(function(e){PrismProcessor.PrismEncoder.updateInnerImage(e)})),e.target.value=""}function ve(e){errorHandling.currCanvasIndex=2;var t=e.target.files[0];X.updateImageFromFile(t,(function(e){PrismProcessor.PrismEncoder.updateCoverImage(e)})),e.target.value=""}errorHandling.scriptsLoaded.DecodeListeners=!0;var Pe=0;function Ee(e){Pe=e.clientX}function Ie(e){Pe<window.innerWidth/2?(errorHandling.currCanvasIndex=1,X.updateImageFromClipboard(e,(function(e){PrismProcessor.PrismEncoder.updateInnerImage(e)}))):(errorHandling.currCanvasIndex=2,X.updateImageFromClipboard(e,(function(e){PrismProcessor.PrismEncoder.updateCoverImage(e)})))}function we(e){errorHandling.currCanvasIndex=1,X.dragDropLoadImage(e,(function(e){PrismProcessor.PrismEncoder.updateInnerImage(e)}))}function Se(e){errorHandling.currCanvasIndex=2,X.dragDropLoadImage(e,(function(e){PrismProcessor.PrismEncoder.updateCoverImage(e)}))}var be,Ce,Le,Be=document.getElementById("innerThresholdRange"),xe=document.getElementById("coverThresholdRange"),Re=document.getElementById("innerThresholdInput"),Te=document.getElementById("coverThresholdInput");function Ae(){return getComputedStyle(document.documentElement).getPropertyValue("--front-color").trim()}function ke(){var e=Be,t=Re;PrismProcessor.PrismEncoder.innerThreshold=parseInt(e.value,10),t.value=PrismProcessor.PrismEncoder.innerThreshold,PrismProcessor.PrismEncoder.innerThreshold>PrismProcessor.PrismEncoder.coverThreshold?(PrismProcessor.PrismEncoder.innerThreshold=PrismProcessor.PrismEncoder.coverThreshold,e.value=PrismProcessor.PrismEncoder.coverThreshold,t.value=PrismProcessor.PrismEncoder.coverThreshold,t.style.color="#ff5e5e"):t.style.color=Ae(),PrismProcessor.PrismEncoder.innerImg&&PrismProcessor.PrismEncoder.coverImg&&PrismProcessor.PrismEncoder.processImage()}function De(){var e=xe,t=Te;PrismProcessor.PrismEncoder.coverThreshold=parseInt(e.value,10),t.value=PrismProcessor.PrismEncoder.coverThreshold,PrismProcessor.PrismEncoder.innerThreshold>PrismProcessor.PrismEncoder.coverThreshold?(PrismProcessor.PrismEncoder.coverThreshold=PrismProcessor.PrismEncoder.innerThreshold,e.value=PrismProcessor.PrismEncoder.innerThreshold,t.value=PrismProcessor.PrismEncoder.innerThreshold,t.style.color="#ff5e5e"):t.style.color=Ae(),PrismProcessor.PrismEncoder.innerImg&&PrismProcessor.PrismEncoder.coverImg&&PrismProcessor.PrismEncoder.processImage()}function Oe(){clearTimeout(be),setTimeout((function(){var e=Re,t=Be;e.style.color=Ae();var r=parseInt(e.value,10);isNaN(r)||(PrismProcessor.PrismEncoder.innerThreshold=r,PrismProcessor.PrismEncoder.innerThreshold>128?(PrismProcessor.PrismEncoder.innerThreshold=128,e.value=128):PrismProcessor.PrismEncoder.innerThreshold<0&&(PrismProcessor.PrismEncoder.innerThreshold=0,e.value=0),t.value=PrismProcessor.PrismEncoder.innerThreshold,PrismProcessor.PrismEncoder.innerThreshold>PrismProcessor.PrismEncoder.coverThreshold&&(PrismProcessor.PrismEncoder.innerThreshold=PrismProcessor.PrismEncoder.coverThreshold,t.value=PrismProcessor.PrismEncoder.coverThreshold,e.value=PrismProcessor.PrismEncoder.coverThreshold),PrismProcessor.PrismEncoder.innerImg&&PrismProcessor.PrismEncoder.coverImg&&PrismProcessor.PrismEncoder.processImage())}),500)}function Ge(){clearTimeout(Ce),setTimeout((function(){var e=Te,t=xe;e.style.color=Ae();var r=parseInt(e.value,10);isNaN(r)||(PrismProcessor.PrismEncoder.coverThreshold=r,PrismProcessor.PrismEncoder.coverThreshold>128?(PrismProcessor.PrismEncoder.coverThreshold=128,e.value=128):PrismProcessor.PrismEncoder.coverThreshold<0&&(PrismProcessor.PrismEncoder.coverrThreshold=0,e.value=0),t.value=PrismProcessor.PrismEncoder.coverThreshold,PrismProcessor.PrismEncoder.innerThreshold>PrismProcessor.PrismEncoder.coverThreshold&&(PrismProcessor.PrismEncoder.coverThreshold=PrismProcessor.PrismEncoder.innerThreshold,t.value=PrismProcessor.PrismEncoder.coverThreshold,e.value=PrismProcessor.PrismEncoder.coverThreshold),PrismProcessor.PrismEncoder.innerImg&&PrismProcessor.PrismEncoder.coverImg&&PrismProcessor.PrismEncoder.processImage())}),500)}function Me(e){PrismProcessor.PrismEncoder.innerContrast=parseInt(e.target.value,10),PrismProcessor.PrismEncoder.innerImg&&(PrismProcessor.PrismEncoder.adjustInnerContrast(),PrismProcessor.PrismEncoder.coverImg&&PrismProcessor.PrismEncoder.processImage())}function Fe(){PrismProcessor.PrismEncoder.innerContrast=50,document.getElementById("innerContrastRange").value=50,PrismProcessor.PrismEncoder.innerImg&&(PrismProcessor.PrismEncoder.adjustInnerContrast(),PrismProcessor.PrismEncoder.coverImg&&PrismProcessor.PrismEncoder.processImage())}function Ue(e){PrismProcessor.PrismEncoder.coverContrast=parseInt(e.target.value,10),PrismProcessor.PrismEncoder.coverImg&&(PrismProcessor.PrismEncoder.adjustCoverContrast(),PrismProcessor.PrismEncoder.innerImg&&PrismProcessor.PrismEncoder.processImage())}function _e(){PrismProcessor.PrismEncoder.coverContrast=50,document.getElementById("coverContrastRange").value=50,PrismProcessor.PrismEncoder.coverImg&&(PrismProcessor.PrismEncoder.adjustCoverContrast(),PrismProcessor.PrismEncoder.innerImg&&PrismProcessor.PrismEncoder.processImage())}function je(e){PrismProcessor.PrismEncoder.isCoverGray=e.target.checked,PrismProcessor.PrismEncoder.coverImg&&PrismProcessor.PrismEncoder.innerImg&&PrismProcessor.PrismEncoder.updateCoverImage(PrismProcessor.PrismEncoder.coverImg)}function Ne(e){PrismProcessor.PrismEncoder.isEncodeReverse=e.target.checked,PrismProcessor.PrismEncoder.innerImg&&PrismProcessor.PrismEncoder.coverImg&&PrismProcessor.PrismEncoder.processImage()}function He(e){PrismProcessor.PrismEncoder.isCoverMirage=e.target.checked,PrismProcessor.PrismEncoder.coverImg&&PrismProcessor.PrismEncoder.innerImg&&PrismProcessor.PrismEncoder.processImage(),e.target.checked&&(document.getElementById("isPngCheckBox").checked=!0,applicationState.isPng=!0)}function ze(e){PrismProcessor.PrismEncoder.method=e.target.value,PrismProcessor.PrismEncoder.innerImg&&PrismProcessor.PrismEncoder.coverImg&&PrismProcessor.PrismEncoder.updateInnerImage(PrismProcessor.PrismEncoder.innerImg)}function Ve(e){clearTimeout(Le),Le=setTimeout((function(){PrismProcessor.PrismEncoder.size=parseInt(e.target.value,10),isNaN(PrismProcessor.PrismEncoder.size)||(PrismProcessor.PrismEncoder.size>applicationState.defaultArguments.maxSize?(PrismProcessor.PrismEncoder.size=applicationState.defaultArguments.maxSize,e.target.value=applicationState.defaultArguments.maxSize):PrismProcessor.PrismEncoder.size<applicationState.defaultArguments.minSize&&(PrismProcessor.PrismEncoder.size=applicationState.defaultArguments.minSize,e.target.value=applicationState.defaultArguments.minSize),PrismProcessor.PrismEncoder.innerImg&&PrismProcessor.PrismEncoder.updateInnerImage(PrismProcessor.PrismEncoder.innerImg))}),500)}function Ye(e){applicationState.isPng=e.target.checked}function $e(){X.saveImageFromCanvas("outputCanvas",applicationState.isPng,!0)}function Xe(){if(PrismProcessor.PrismEncoder.innerImg&&PrismProcessor.PrismEncoder.coverImg){X.setDecodeValues(PrismProcessor.PrismEncoder.isEncodeReverse,PrismProcessor.PrismEncoder.innerThreshold,PrismProcessor.PrismEncoder.innerContrast);var e=new Image;e.src=X.generateUrlFromCanvas("outputCanvas",applicationState.isPng,!1),e.onload=function(){PrismProcessor.PrismDecoder.updateImage(e),Je()}}}function Je(){var e=document.getElementById("decodePage"),t=document.getElementById("encodePage"),r=document.getElementById("decodeButton"),n=document.getElementById("encodeButton");"decodePage"===applicationState.currPageId?(t.style.display="flex",e.style.display="none",r.classList.remove("PageSwitchButtonSelected"),r.classList.add("PageSwitchButtonUnselected"),n.classList.remove("PageSwitchButtonUnselected"),n.classList.add("PageSwitchButtonSelected"),ge.decodeRemoveEventListeners(),We(),applicationState.currPageId="encodePage",document.getElementById("decodeButton").addEventListener("click",Je),document.getElementById("encodeButton").removeEventListener("click",Je)):(e.style.display="flex",t.style.display="none",r.classList.remove("PageSwitchButtonUnselected"),r.classList.add("PageSwitchButtonSelected"),n.classList.remove("PageSwitchButtonSelected"),n.classList.add("PageSwitchButtonUnselected"),ge.decodeSetupEventListeners(),qe(),applicationState.currPageId="decodePage",document.getElementById("encodeButton").addEventListener("click",Je),document.getElementById("decodeButton").removeEventListener("click",Je))}function We(){document.getElementById("innerSourceFileInput").addEventListener("change",ye),document.getElementById("coverSourceFileInput").addEventListener("change",ve),applicationState.isOnPhone||(window.addEventListener("mousemove",Ee),window.addEventListener("paste",Ie),document.getElementById("innerCanvas").addEventListener("drop",we),document.getElementById("coverCanvas").addEventListener("drop",Se)),document.getElementById("innerThresholdRange").addEventListener("input",ke),document.getElementById("coverThresholdRange").addEventListener("input",De),document.getElementById("innerThresholdInput").addEventListener("input",Oe),document.getElementById("coverThresholdInput").addEventListener("input",Ge),document.getElementById("innerContrastRange").addEventListener("input",Me),document.getElementById("coverContrastRange").addEventListener("input",Ue),document.getElementById("innerResetContrastButton").addEventListener("click",Fe),document.getElementById("coverResetContrastButton").addEventListener("click",_e),document.getElementById("isCoverGrayCheckBox").addEventListener("change",je),document.getElementById("isEncodeReverseCheckBox").addEventListener("change",Ne),document.getElementById("isCoverMirageCheckBox").addEventListener("change",He),document.getElementById("encodeMethodSelect").addEventListener("change",ze),document.getElementById("encodeSizeInput").addEventListener("input",Ve),document.getElementById("isPngCheckBox").addEventListener("change",Ye),document.getElementById("jumpToDecodeButton").addEventListener("click",Xe),document.getElementById("encodeSaveImageButton").addEventListener("click",$e)}function qe(){document.getElementById("innerSourceFileInput").removeEventListener("change",ye),document.getElementById("coverSourceFileInput").removeEventListener("change",ve),applicationState.isOnPhone||(window.removeEventListener("mousemove",Ee),window.removeEventListener("paste",Ie),document.getElementById("innerCanvas").removeEventListener("drop",we),document.getElementById("coverCanvas").removeEventListener("drop",Se)),document.getElementById("innerThresholdRange").removeEventListener("input",ke),document.getElementById("coverThresholdRange").removeEventListener("input",De),document.getElementById("innerThresholdInput").removeEventListener("input",Oe),document.getElementById("coverThresholdInput").removeEventListener("input",Ge),document.getElementById("innerContrastRange").removeEventListener("input",Me),document.getElementById("coverContrastRange").removeEventListener("input",Ue),document.getElementById("innerResetContrastButton").removeEventListener("click",Fe),document.getElementById("coverResetContrastButton").removeEventListener("click",_e),document.getElementById("isCoverGrayCheckBox").removeEventListener("change",je),document.getElementById("isEncodeReverseCheckBox").removeEventListener("change",Ne),document.getElementById("isCoverMirageCheckBox").removeEventListener("change",He),document.getElementById("encodeMethodSelect").removeEventListener("change",ze),document.getElementById("encodeSizeInput").removeEventListener("input",Ve),document.getElementById("isPngCheckBox").removeEventListener("change",Ye),document.getElementById("jumpToDecodeButton").removeEventListener("click",Xe),document.getElementById("encodeSaveImageButton").removeEventListener("click",$e)}const Ze={switchPage:Je,encodeSetUpEventListeners:We,encodeRemoveEventListeners:qe};function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function Qe(){Qe=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:L(e,r,s)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="suspendedYield",m="executing",p="completed",g={};function y(){}function v(){}function P(){}var E={};u(E,a,(function(){return this}));var I=Object.getPrototypeOf,w=I&&I(I(A([])));w&&w!==r&&n.call(w,a)&&(E=w);var S=P.prototype=y.prototype=Object.create(E);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,a,s){var c=h(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ke(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,r,n){var o=d;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=B(s,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?p:f,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=p,n.method="throw",n.arg=u.arg)}}}function B(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,B(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=h(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Ke(t)+" is not iterable")}return v.prototype=P,o(S,"constructor",{value:P,configurable:!0}),o(P,"constructor",{value:v,configurable:!0}),v.displayName=u(P,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,P):(e.__proto__=P,u(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},b(C.prototype),u(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new C(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(S),u(S,c,"Generator"),u(S,a,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function et(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rt(n.key),n)}}function rt(e){var t=function(e){if("object"!=Ke(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ke(t)?t:t+""}errorHandling.scriptsLoaded.EncodeListeners=!0;const nt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"loadDefaultArguments",value:(r=Qe().mark((function e(t){var r,n;return Qe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:if((r=e.sent).ok){e.next=6;break}throw new Error("网络请求失败");case 6:return e.next=8,r.json();case 8:n=e.sent,this.isReadMetadata=n.isReadMetadata,this.decodeThreshold=n.decodeThreshold,this.isDecodeReverse=n.isDecodeReverse,this.decodeMethod=n.decodeMethod,this.decodeContrast=n.decodeContrast,this.innerThreshold=n.innerThreshold,this.coverThreshold=n.coverThreshold,this.isCoverGray=n.isCoverGray,this.isEncodeReverse=n.isEncodeReverse,this.isCoverMirage=n.isCoverMirage,this.isPng=n.isPng,this.encodeMethod=n.encodeMethod,this.innerContrast=n.innerContrast,this.coverContrast=n.coverContrast,this.size=n.size,this.minSize=n.minSize,this.maxSize=n.maxSize,this.defaultPageId=n.defaultPageId,this.defaultSrc=n.defaultSrc,e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),console.error("加载默认参数失败:",e.t0);case 33:case"end":return e.stop()}}),e,this,[[0,30]])})),n=function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){et(i,n,o,a,s,"next",e)}function s(e){et(i,n,o,a,s,"throw",e)}a(void 0)}))},function(e){return n.apply(this,arguments)})},{key:"setDefaultValues",value:function(){document.getElementById("isReadMetadataCheckBox").checked=this.isReadMetadata,document.getElementById("decodeThresholdRange").value=this.decodeThreshold,document.getElementById("decodeReverseInput").checked=this.isDecodeReverse,document.getElementById("optionSelect").value=this.decodeMethod,document.getElementById("decodeContrastRange").value=this.decodeContrast,document.getElementById("innerThresholdRange").value=this.innerThreshold,document.getElementById("innerThresholdInput").value=this.innerThreshold,document.getElementById("coverThresholdRange").value=this.coverThreshold,document.getElementById("coverThresholdInput").value=this.coverThreshold,document.getElementById("innerContrastRange").value=this.innerContrast,document.getElementById("coverContrastRange").value=this.coverContrast,document.getElementById("isCoverGrayCheckBox").checked=this.isCoverGray,document.getElementById("isEncodeReverseCheckBox").checked=this.isEncodeReverse,document.getElementById("isCoverMirageCheckBox").checked=this.isCoverMirage,document.getElementById("isPngCheckBox").checked=this.isPng,document.getElementById("encodeMethodSelect").value=this.encodeMethod,document.getElementById("encodeSizeInput").value=this.size}}],t&&tt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n}();function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function it(){it=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:L(e,r,s)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",f="suspendedYield",m="executing",p="completed",g={};function y(){}function v(){}function P(){}var E={};u(E,a,(function(){return this}));var I=Object.getPrototypeOf,w=I&&I(I(A([])));w&&w!==r&&n.call(w,a)&&(E=w);var S=P.prototype=y.prototype=Object.create(E);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(o,i,a,s){var c=h(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ot(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,r,n){var o=d;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=B(s,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=h(t,r,n);if("normal"===u.type){if(o=n.done?p:f,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=p,n.method="throw",n.arg=u.arg)}}}function B(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,B(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=h(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(ot(t)+" is not iterable")}return v.prototype=P,o(S,"constructor",{value:P,configurable:!0}),o(P,"constructor",{value:v,configurable:!0}),v.displayName=u(P,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,P):(e.__proto__=P,u(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},b(C.prototype),u(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new C(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(S),u(S,c,"Generator"),u(S,a,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function at(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function st(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){at(i,n,o,a,s,"next",e)}function s(e){at(i,n,o,a,s,"throw",e)}a(void 0)}))}}errorHandling.scriptsLoaded.DefaultArguments=!0,errorHandling.userAgent=navigator.userAgent.toLowerCase(),applicationState.isOnPhone=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(errorHandling.userAgent),applicationState.isDownloadNotSupported=applicationState.isOnPhone&&/xiaomi|miui/i.test(errorHandling.userAgent),applicationState.isOnTiebaBrowser=/tieba/i.test(errorHandling.userAgent),document.addEventListener("DOMContentLoaded",st(it().mark((function e(){var t,r,n,o,i,a,s,c;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!applicationState.isOnTiebaBrowser){e.next=4;break}return document.body.innerHTML='<h1>请点击右上角<br>用浏览器打开</h1><img src="https://gsp0.baidu.com/5aAHeD3nKhI2p27j8IqW0jdnxx1xbK/tb/editor/images/client/image_emoticon1.png"></img>',e.abrupt("return");case 4:return(t=document.getElementById("versionInfo"))&&(t.innerHTML="version: <b>".concat(applicationState.version,"</b>")),r=(r=document.getElementById("jsonPath").getAttribute("data-json-path"))+"?v="+applicationState.version,applicationState.defaultArguments=new nt,e.next=11,applicationState.defaultArguments.loadDefaultArguments(r);case 11:applicationState.defaultArguments.setDefaultValues(),applicationState.isPng=applicationState.defaultArguments.isPng,applicationState.currPageId=applicationState.defaultArguments.defaultPageId,applicationState.isReadMetadata=applicationState.defaultArguments.isReadMetadata,PrismProcessor.PrismDecoder=new Z("decodeCanvas",applicationState.defaultArguments),PrismProcessor.PrismEncoder=new te("innerCanvas","coverCanvas","outputCanvas",applicationState.defaultArguments),errorHandling.defaultImg=[],n=it().mark((function e(t){var r;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:errorHandling.defaultImg[t]=new Image,errorHandling.defaultImg[t].crossOrigin="anonymous",r=setTimeout((function(){errorHandling.defaultImg[t].src="",errorHandling.defaultImg[t].onerror=null,console.error("加载默认图像超时: "+applicationState.defaultArguments.defaultSrc[t])}),5e3),errorHandling.defaultImg[t].onload=function(){switch(clearTimeout(r),t){case 0:PrismProcessor.PrismDecoder.updateImage(errorHandling.defaultImg[t]);break;case 1:PrismProcessor.PrismEncoder.updateInnerImage(errorHandling.defaultImg[t]);break;case 2:PrismProcessor.PrismEncoder.updateCoverImage(errorHandling.defaultImg[t])}},errorHandling.defaultImg[t].onerror=function(){clearTimeout(r),console.error("无法加载默认图像: "+applicationState.defaultArguments.defaultSrc[t]),errorHandling.defaultImg[t].src="",errorHandling.defaultImg[t].onerror=null},errorHandling.defaultImg[t].src=applicationState.defaultArguments.defaultSrc[t];case 6:case"end":return e.stop()}}),e)})),o=0;case 20:if(!(o<applicationState.defaultArguments.defaultSrc.length)){e.next=25;break}return e.delegateYield(n(o),"t0",22);case 22:o++,e.next=20;break;case 25:re(),e.t1=applicationState.defaultArguments.defaultPageId,e.next="encodePage"===e.t1?29:"decodePage"===e.t1?36:43;break;case 29:return document.getElementById("decodePage").style.display="none",document.getElementById("encodePage").style.display="flex",document.getElementById("encodeButton").classList.add("PageSwitchButtonSelected"),document.getElementById("decodeButton").classList.add("PageSwitchButtonUnselected"),Ze.encodeSetUpEventListeners(),document.getElementById("decodeButton").addEventListener("click",Ze.switchPage),e.abrupt("break",43);case 36:return document.getElementById("encodePage").style.display="none",document.getElementById("decodePage").style.display="flex",document.getElementById("decodeButton").classList.add("PageSwitchButtonSelected"),document.getElementById("encodeButton").classList.add("PageSwitchButtonUnselected"),ge.decodeSetupEventListeners(),document.getElementById("encodeButton").addEventListener("click",Ze.switchPage),e.abrupt("break",43);case 43:if(applicationState.isOnPhone)for(document.getElementById("decodePasteInput").style.display="none",document.getElementById("decodeDragInputHint").style.display="none",i=document.getElementsByClassName("encodeDrag"),a=0;a<i.length;a++)i[a].style.display="none";else document.getElementById("decodePasteButton").style.display="none";if(applicationState.isDownloadNotSupported)for(document.getElementById("isPng").style.display="none",document.getElementById("isCoverMirage").style.display="none",applicationState.isPng=!1,PrismProcessor.PrismEncoder.isCoverMirage=!1,s=document.getElementsByClassName("saveHint"),c=0;c<s.length;c++)s[c].innerText="(请在弹出的窗口中长按保存)";e.next=51;break;case 47:e.prev=47,e.t2=e.catch(0),console.error("Failed to initialize: "+e.t2),alert("初始化失败: "+e.t2);case 51:case"end":return e.stop()}}),e,null,[[0,47]])})))),errorHandling.scriptsLoaded.init=!0})()})();